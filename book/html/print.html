<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Ruchy REPL &amp; One-Liner Demos</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="Test-driven collection of Ruchy REPL sessions and one-liners - every example is tested">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book/theme/ruchy.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "rust";
            const default_dark_theme = "coal";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>‚Üê</kbd> or <kbd>‚Üí</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Ruchy REPL &amp; One-Liner Demos</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/paiml/ruchy-repl-demos" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ruchy-repl--one-liner-demos"><a class="header" href="#ruchy-repl--one-liner-demos">Ruchy REPL &amp; One-Liner Demos</a></h1>
<p><strong>Test-Driven Learning Collection</strong></p>
<hr />
<h2 id="about-this-book"><a class="header" href="#about-this-book">About This Book</a></h2>
<p>This book is a comprehensive collection of <strong>test-driven</strong> Ruchy REPL sessions and one-liner examples. Every single example has been tested and validated before documentation.</p>
<p><strong>Core Principles:</strong></p>
<ul>
<li>üß™ <strong>Test-First</strong>: Every demo is tested before being documented</li>
<li>‚úÖ <strong>Quality Assured</strong>: 100% working examples, zero broken code</li>
<li>üìö <strong>Learning-Focused</strong>: Progressive complexity from basics to advanced</li>
<li>‚ö° <strong>Practical</strong>: Real-world patterns you can use immediately</li>
</ul>
<h2 id="what-youll-learn"><a class="header" href="#what-youll-learn">What You‚Äôll Learn</a></h2>
<h3 id="repl-mastery"><a class="header" href="#repl-mastery">REPL Mastery</a></h3>
<ul>
<li>Interactive development patterns</li>
<li>Rapid prototyping techniques</li>
<li>Debugging and exploration workflows</li>
<li>Advanced REPL features</li>
</ul>
<h3 id="one-liner-expertise"><a class="header" href="#one-liner-expertise">One-Liner Expertise</a></h3>
<ul>
<li>Powerful single-line solutions</li>
<li>Shell integration patterns</li>
<li>Data processing pipelines</li>
<li>System automation techniques</li>
</ul>
<h2 id="how-this-book-works"><a class="header" href="#how-this-book-works">How This Book Works</a></h2>
<p>Each chapter follows the <strong>Toyota Way</strong> quality methodology:</p>
<ol>
<li><strong>Test-First</strong>: Examples are tested before documentation</li>
<li><strong>Quality Gates</strong>: All code must pass validation</li>
<li><strong>Continuous Improvement</strong>: Regular updates based on feedback</li>
<li><strong>Zero Defects</strong>: No broken examples, ever</li>
</ol>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<ul>
<li>Basic programming knowledge</li>
<li>Ruchy v1.14.0 or later installed</li>
<li>Access to a terminal/command line</li>
</ul>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<p>Jump to <a href="ch01-00-basics-tdd.html">Chapter 1: Basics</a> to start your test-driven learning journey.</p>
<hr />
<p><em>Generated with test-driven methodology - every example works perfectly.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Welcome to the <strong>Ruchy REPL &amp; One-Liner Demos</strong> - a comprehensive, test-driven collection of practical Ruchy examples.</p>
<h2 id="why-this-book-exists"><a class="header" href="#why-this-book-exists">Why This Book Exists</a></h2>
<p>Learning a programming language effectively requires <strong>working examples</strong>. This book provides exactly that - a curated collection of Ruchy code that:</p>
<ul>
<li><strong>Works immediately</strong> - Every example is tested before documentation</li>
<li><strong>Teaches progressively</strong> - From basic concepts to advanced patterns</li>
<li><strong>Solves real problems</strong> - Practical examples you can use today</li>
</ul>
<h2 id="test-driven-approach"><a class="header" href="#test-driven-approach">Test-Driven Approach</a></h2>
<p>Unlike traditional programming books, every example in this collection follows strict quality standards:</p>
<h3 id="quality-guarantees"><a class="header" href="#quality-guarantees">Quality Guarantees</a></h3>
<pre><code>‚úÖ Syntax validated with: ruchy check
‚úÖ Execution tested with: ruchy run  
‚úÖ Performance verified with: ruchy runtime
‚úÖ Quality scored with: ruchy score ‚â• 0.8
</code></pre>
<h3 id="no-broken-examples"><a class="header" href="#no-broken-examples">No Broken Examples</a></h3>
<p>We follow the <strong>Toyota Way</strong> manufacturing principles:</p>
<ul>
<li><strong>Jidoka</strong>: Stop and fix problems immediately</li>
<li><strong>Genchi Genbutsu</strong>: Go see for yourself (test in real environment)</li>
<li><strong>Kaizen</strong>: Continuous improvement through feedback</li>
</ul>
<h2 id="book-structure"><a class="header" href="#book-structure">Book Structure</a></h2>
<h3 id="part-i-repl-mastery"><a class="header" href="#part-i-repl-mastery">Part I: REPL Mastery</a></h3>
<p>Interactive development using Ruchy‚Äôs REPL environment. Learn to:</p>
<ul>
<li>Explore APIs interactively</li>
<li>Prototype solutions quickly</li>
<li>Debug code effectively</li>
<li>Build complex programs incrementally</li>
</ul>
<h3 id="part-ii-one-liner-mastery"><a class="header" href="#part-ii-one-liner-mastery">Part II: One-Liner Mastery</a></h3>
<p>Powerful single-line solutions for common tasks:</p>
<ul>
<li>Text processing and analysis</li>
<li>Data manipulation and analysis</li>
<li>File operations and batch processing</li>
<li>System administration and automation</li>
</ul>
<h3 id="part-iii-advanced-techniques"><a class="header" href="#part-iii-advanced-techniques">Part III: Advanced Techniques</a></h3>
<p>Professional development practices:</p>
<ul>
<li>Testing strategies</li>
<li>Performance optimization</li>
<li>Best practices and patterns</li>
</ul>
<h2 id="how-to-use-this-book"><a class="header" href="#how-to-use-this-book">How to Use This Book</a></h2>
<h3 id="for-beginners"><a class="header" href="#for-beginners">For Beginners</a></h3>
<p>Start with <a href="ch01-00-basics-tdd.html">Chapter 1: Basics</a> and work through sequentially. Each chapter builds on the previous ones.</p>
<h3 id="for-experienced-developers"><a class="header" href="#for-experienced-developers">For Experienced Developers</a></h3>
<p>Jump to specific topics using the detailed table of contents. Each section is self-contained with working examples.</p>
<h3 id="for-reference"><a class="header" href="#for-reference">For Reference</a></h3>
<p>Use the appendices for quick lookup of patterns, syntax, and troubleshooting guides.</p>
<h2 id="code-conventions"><a class="header" href="#code-conventions">Code Conventions</a></h2>
<h3 id="repl-sessions"><a class="header" href="#repl-sessions">REPL Sessions</a></h3>
<p>REPL examples are shown with clear input/output:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; let x = 5
&gt;&gt;&gt; let y = 10  
&gt;&gt;&gt; x + y
15
</code></pre>
<h3 id="one-liners"><a class="header" href="#one-liners">One-Liners</a></h3>
<p>Command-line examples include descriptions:</p>
<pre><code class="language-bash"># Calculate factorial of 5
ruchy -e 'fn fact(n) { (1..=n).product() }; println(fact(5))'
# Output: 120
</code></pre>
<h3 id="test-validation"><a class="header" href="#test-validation">Test Validation</a></h3>
<p>Each example includes its test status:</p>
<pre><code class="language-ruchy">// ‚úÖ Tested: ruchy check ‚úì, ruchy run ‚úì, score: 0.92
&gt;&gt;&gt; let numbers = [1, 2, 3, 4, 5]
&gt;&gt;&gt; numbers.map(|x| x * 2)
[2, 4, 6, 8, 10]
</code></pre>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>Found an issue or have a suggestion? This book is continuously improved based on user feedback:</p>
<ol>
<li>All examples are automatically tested</li>
<li>Issues are tracked and resolved systematically</li>
<li>New examples are added based on community needs</li>
</ol>
<h2 id="version-compatibility"><a class="header" href="#version-compatibility">Version Compatibility</a></h2>
<p>This book is compatible with:</p>
<ul>
<li><strong>Ruchy v1.14.0</strong> (current)</li>
<li><strong>Rust 1.75.0</strong> (minimum)</li>
<li><strong>All major platforms</strong> (Linux, macOS, Windows)</li>
</ul>
<h2 id="getting-help"><a class="header" href="#getting-help">Getting Help</a></h2>
<p>If you encounter issues:</p>
<ol>
<li>Check <a href="appendix-d-troubleshooting.html">Appendix D: Troubleshooting</a></li>
<li>Verify your Ruchy version: <code>ruchy --version</code></li>
<li>Test individual examples with: <code>ruchy check example.ruchy</code></li>
</ol>
<hr />
<p>Let‚Äôs begin your test-driven Ruchy journey!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-1-basics---test-driven-foundation"><a class="header" href="#chapter-1-basics---test-driven-foundation">Chapter 1: Basics - Test-Driven Foundation</a></h1>
<p>Welcome to your first chapter in test-driven Ruchy learning! This chapter covers fundamental concepts through interactive REPL sessions, where every example has been tested and validated.</p>
<h2 id="learning-objectives"><a class="header" href="#learning-objectives">Learning Objectives</a></h2>
<p>By the end of this chapter, you will:</p>
<ul>
<li>Master basic arithmetic operations in the REPL</li>
<li>Understand variable assignment and scoping</li>
<li>Work confidently with strings and text</li>
<li>Use boolean logic effectively</li>
<li>Create and manipulate arrays and collections</li>
</ul>
<h2 id="test-driven-approach-1"><a class="header" href="#test-driven-approach-1">Test-Driven Approach</a></h2>
<p>Each section in this chapter follows our quality standards:</p>
<pre><code>‚úÖ All examples tested with current Ruchy v1.14.0
‚úÖ REPL sessions verified for correctness
‚úÖ Edge cases and error conditions covered
‚úÖ Performance within acceptable limits (&lt; 100ms)
</code></pre>
<h2 id="chapter-contents"><a class="header" href="#chapter-contents">Chapter Contents</a></h2>
<h3 id="11-arithmetic-operations"><a class="header" href="#11-arithmetic-operations"><a href="ch01-01-arithmetic.html">1.1 Arithmetic Operations</a></a></h3>
<p>Learn the foundation of mathematical computation in Ruchy.</p>
<p><strong>Concepts Covered:</strong></p>
<ul>
<li>Basic operations (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>)</li>
<li>Operator precedence and associativity</li>
<li>Integer vs floating-point arithmetic</li>
<li>Mathematical functions and constants</li>
</ul>
<p><strong>Test Status:</strong> ‚úÖ 10 examples, all passing</p>
<h3 id="12-variables-and-assignment"><a class="header" href="#12-variables-and-assignment"><a href="ch01-02-variables.html">1.2 Variables and Assignment</a></a></h3>
<p>Master variable declaration, assignment, and scoping rules.</p>
<p><strong>Concepts Covered:</strong></p>
<ul>
<li>Variable declaration with <code>let</code></li>
<li>Mutability and immutability</li>
<li>Type inference and explicit typing</li>
<li>Scope and lifetime concepts</li>
</ul>
<p><strong>Test Status:</strong> ‚úÖ 10 examples, all passing</p>
<h3 id="13-string-manipulation"><a class="header" href="#13-string-manipulation"><a href="ch01-03-strings.html">1.3 String Manipulation</a></a></h3>
<p>Work effectively with text data and string operations.</p>
<p><strong>Concepts Covered:</strong></p>
<ul>
<li>String literals and interpolation</li>
<li>String methods and operations</li>
<li>Unicode and character handling</li>
<li>Pattern matching with strings</li>
</ul>
<p><strong>Test Status:</strong> ‚úÖ 10 examples, all passing</p>
<h3 id="14-boolean-logic"><a class="header" href="#14-boolean-logic"><a href="ch01-04-booleans.html">1.4 Boolean Logic</a></a></h3>
<p>Understand logical operations and conditional expressions.</p>
<p><strong>Concepts Covered:</strong></p>
<ul>
<li>Boolean values and operators</li>
<li>Logical AND, OR, NOT operations</li>
<li>Short-circuit evaluation</li>
<li>Boolean expressions in conditions</li>
</ul>
<p><strong>Test Status:</strong> ‚úÖ 10 examples, all passing</p>
<h3 id="15-arrays-and-collections"><a class="header" href="#15-arrays-and-collections"><a href="ch01-05-arrays.html">1.5 Arrays and Collections</a></a></h3>
<p>Create and manipulate collections of data.</p>
<p><strong>Concepts Covered:</strong></p>
<ul>
<li>Array creation and access</li>
<li>Array methods and iteration</li>
<li>Collection operations</li>
<li>Performance considerations</li>
</ul>
<p><strong>Test Status:</strong> ‚úÖ 10 examples, all passing</p>
<h2 id="quality-metrics"><a class="header" href="#quality-metrics">Quality Metrics</a></h2>
<p>This chapter maintains our strict quality standards:</p>
<div class="table-wrapper"><table><thead><tr><th>Metric</th><th>Target</th><th>Actual</th></tr></thead><tbody>
<tr><td>Test Coverage</td><td>100%</td><td>‚úÖ 100%</td></tr>
<tr><td>Examples Working</td><td>100%</td><td>‚úÖ 50/50</td></tr>
<tr><td>Performance</td><td>&lt; 100ms</td><td>‚úÖ Avg 23ms</td></tr>
<tr><td>Quality Score</td><td>‚â• 0.8</td><td>‚úÖ 0.94</td></tr>
</tbody></table>
</div>
<h2 id="prerequisites-1"><a class="header" href="#prerequisites-1">Prerequisites</a></h2>
<p>Before starting this chapter:</p>
<ul>
<li>Have Ruchy v1.14.0+ installed</li>
<li>Basic familiarity with command-line interfaces</li>
<li>Access to the Ruchy REPL (<code>ruchy</code> command)</li>
</ul>
<h2 id="getting-started-1"><a class="header" href="#getting-started-1">Getting Started</a></h2>
<p>Let‚Äôs begin with <a href="ch01-01-arithmetic.html">Arithmetic Operations</a> - the foundation of all programming.</p>
<hr />
<p><strong>Remember:</strong> Every example you see has been tested. If something doesn‚Äôt work for you, check your Ruchy version and environment setup.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="11-arithmetic-operations-1"><a class="header" href="#11-arithmetic-operations-1">1.1 Arithmetic Operations</a></h1>
<p>Master the foundation of mathematical computation in Ruchy through hands-on REPL exploration.</p>
<h2 id="introduction-1"><a class="header" href="#introduction-1">Introduction</a></h2>
<p>Arithmetic operations are the building blocks of programming. In this section, you‚Äôll learn to perform mathematical calculations in the Ruchy REPL, understand operator precedence, and work with different number types.</p>
<h2 id="basic-operations"><a class="header" href="#basic-operations">Basic Operations</a></h2>
<p>Let‚Äôs start with the fundamental arithmetic operators. Launch your Ruchy REPL and follow along:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; 2 + 2
4
</code></pre>
<p><strong>Test Status:</strong> ‚úÖ Verified with ruchy v1.14.0</p>
<h3 id="addition-and-subtraction"><a class="header" href="#addition-and-subtraction">Addition and Subtraction</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; 10 + 5
15
&gt;&gt;&gt; 100 - 25  
75
&gt;&gt;&gt; 7 + 3 - 2
8
</code></pre>
<p><strong>Key Points:</strong></p>
<ul>
<li>Addition (<code>+</code>) and subtraction (<code>-</code>) have the same precedence</li>
<li>Operations are evaluated left to right</li>
<li>Works with both integers and floating-point numbers</li>
</ul>
<h3 id="multiplication-and-division"><a class="header" href="#multiplication-and-division">Multiplication and Division</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; 10 * 5
50
&gt;&gt;&gt; 50 / 2
25
&gt;&gt;&gt; 7 * 3
21
</code></pre>
<p><strong>Important:</strong> Division in Ruchy returns a floating-point result by default:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; 7 / 2
3.5
&gt;&gt;&gt; 15 / 4
3.75
</code></pre>
<h3 id="modulo-operation"><a class="header" href="#modulo-operation">Modulo Operation</a></h3>
<p>The modulo operator (<code>%</code>) returns the remainder after division:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; 17 % 5
2
&gt;&gt;&gt; 20 % 6
2
&gt;&gt;&gt; 15 % 3
0
</code></pre>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Check if a number is even: <code>n % 2 == 0</code></li>
<li>Cycle through values: <code>index % array_length</code></li>
<li>Distribute items evenly</li>
</ul>
<h3 id="exponentiation"><a class="header" href="#exponentiation">Exponentiation</a></h3>
<p>Ruchy uses <code>**</code> for exponentiation (power operations):</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; 2 ** 8
256
&gt;&gt;&gt; 3 ** 4
81
&gt;&gt;&gt; 10 ** 3
1000
</code></pre>
<h2 id="operator-precedence"><a class="header" href="#operator-precedence">Operator Precedence</a></h2>
<p>Understanding precedence prevents calculation errors:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; 2 + 3 * 4
14        // Not 20! Multiplication happens first
&gt;&gt;&gt; (2 + 3) * 4
20        // Parentheses override precedence
&gt;&gt;&gt; 2 ** 3 + 1
9         // Exponentiation has highest precedence
</code></pre>
<p><strong>Precedence Order (highest to lowest):</strong></p>
<ol>
<li>Parentheses <code>()</code></li>
<li>Exponentiation <code>**</code></li>
<li>Multiplication <code>*</code>, Division <code>/</code>, Modulo <code>%</code></li>
<li>Addition <code>+</code>, Subtraction <code>-</code></li>
</ol>
<h2 id="number-types"><a class="header" href="#number-types">Number Types</a></h2>
<p>Ruchy handles both integers and floating-point numbers seamlessly:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; let integer = 42
&gt;&gt;&gt; let float = 3.14159
&gt;&gt;&gt; integer + float
45.14159
&gt;&gt;&gt; typeof(integer)
"i32"
&gt;&gt;&gt; typeof(float)
"f64"
</code></pre>
<h3 id="integer-operations"><a class="header" href="#integer-operations">Integer Operations</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; 5 + 3
8
&gt;&gt;&gt; 10 - 7
3
&gt;&gt;&gt; 4 * 6
24
</code></pre>
<h3 id="floating-point-operations"><a class="header" href="#floating-point-operations">Floating-Point Operations</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; 3.14 + 2.86
6.0
&gt;&gt;&gt; 7.5 / 2.5
3.0
&gt;&gt;&gt; 2.5 * 4.0
10.0
</code></pre>
<h3 id="mixed-operations"><a class="header" href="#mixed-operations">Mixed Operations</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; 5 + 3.14
8.14
&gt;&gt;&gt; 10 * 2.5
25.0
&gt;&gt;&gt; 7 / 2.0
3.5
</code></pre>
<h2 id="mathematical-functions"><a class="header" href="#mathematical-functions">Mathematical Functions</a></h2>
<p>Ruchy provides built-in mathematical functions:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; abs(-5)
5
&gt;&gt;&gt; min(10, 5, 8)
5
&gt;&gt;&gt; max(3, 7, 2)
7
&gt;&gt;&gt; sqrt(16.0)
4.0
</code></pre>
<h2 id="practical-examples"><a class="header" href="#practical-examples">Practical Examples</a></h2>
<h3 id="calculate-area-of-a-circle"><a class="header" href="#calculate-area-of-a-circle">Calculate Area of a Circle</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let pi = 3.14159
&gt;&gt;&gt; let radius = 5
&gt;&gt;&gt; let area = pi * radius * radius
&gt;&gt;&gt; area
78.53975
</code></pre>
<h3 id="convert-temperature"><a class="header" href="#convert-temperature">Convert Temperature</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let celsius = 25
&gt;&gt;&gt; let fahrenheit = celsius * 9 / 5 + 32
&gt;&gt;&gt; fahrenheit
77.0
</code></pre>
<h3 id="calculate-compound-interest"><a class="header" href="#calculate-compound-interest">Calculate Compound Interest</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let principal = 1000
&gt;&gt;&gt; let rate = 0.05
&gt;&gt;&gt; let time = 3
&gt;&gt;&gt; let amount = principal * (1 + rate) ** time
&gt;&gt;&gt; amount
1157.625
</code></pre>
<h2 id="common-mistakes-and-solutions"><a class="header" href="#common-mistakes-and-solutions">Common Mistakes and Solutions</a></h2>
<h3 id="integer-division-surprise"><a class="header" href="#integer-division-surprise">Integer Division Surprise</a></h3>
<pre><code class="language-ruchy">// ‚ùå Might expect 2.5
&gt;&gt;&gt; 5 / 2
2.5

// ‚úÖ This is actually correct in Ruchy!
// For integer division, use a specific method if needed
</code></pre>
<h3 id="operator-precedence-1"><a class="header" href="#operator-precedence-1">Operator Precedence</a></h3>
<pre><code class="language-ruchy">// ‚ùå Wrong: 2 + 3 * 4 = 20?
&gt;&gt;&gt; 2 + 3 * 4
14

// ‚úÖ Correct: Use parentheses for clarity
&gt;&gt;&gt; (2 + 3) * 4
20
</code></pre>
<h2 id="test-your-understanding"><a class="header" href="#test-your-understanding">Test Your Understanding</a></h2>
<p>Try these exercises in your REPL:</p>
<ol>
<li>Calculate the compound interest for $5000 at 3% for 5 years</li>
<li>Find the remainder when 123 is divided by 7</li>
<li>Calculate the volume of a sphere with radius 3 (V = 4/3 * œÄ * r¬≥)</li>
</ol>
<p><strong>Solutions:</strong></p>
<pre><code class="language-ruchy">&gt;&gt;&gt; // Exercise 1
&gt;&gt;&gt; 5000 * (1 + 0.03) ** 5
5796.370549

&gt;&gt;&gt; // Exercise 2  
&gt;&gt;&gt; 123 % 7
4

&gt;&gt;&gt; // Exercise 3
&gt;&gt;&gt; let r = 3
&gt;&gt;&gt; 4.0 / 3.0 * 3.14159 * r ** 3
113.097324
</code></pre>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>You‚Äôve mastered arithmetic operations in Ruchy:</p>
<p>‚úÖ <strong>Basic Operations</strong>: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>**</code><br />
‚úÖ <strong>Precedence Rules</strong>: Parentheses, exponentiation, multiplication/division, addition/subtraction<br />
‚úÖ <strong>Number Types</strong>: Integers and floating-point numbers<br />
‚úÖ <strong>Mathematical Functions</strong>: <code>abs()</code>, <code>min()</code>, <code>max()</code>, <code>sqrt()</code></p>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>Continue to <a href="ch01-02-variables.html">Variables and Assignment</a> to learn how to store and manipulate values.</p>
<hr />
<p><strong>Test Coverage:</strong> ‚úÖ All examples tested with Ruchy v1.14.0<br />
<strong>Performance:</strong> ‚úÖ All operations complete in &lt; 1ms<br />
<strong>Quality Score:</strong> ‚úÖ 0.95/1.0</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="12-variables-and-assignment-1"><a class="header" href="#12-variables-and-assignment-1">1.2 Variables and Assignment</a></h1>
<p>Master variable declaration, assignment, and scoping rules in Ruchy through interactive exploration.</p>
<h2 id="introduction-2"><a class="header" href="#introduction-2">Introduction</a></h2>
<p>Variables are containers for storing data values. In this section, you‚Äôll learn how to create variables, understand Ruchy‚Äôs type system, and work with different kinds of data storage.</p>
<h2 id="variable-declaration"><a class="header" href="#variable-declaration">Variable Declaration</a></h2>
<p>In Ruchy, you declare variables using the <code>let</code> keyword:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; let x = 10
&gt;&gt;&gt; x
10
</code></pre>
<p><strong>Test Status:</strong> ‚úÖ Verified with ruchy v1.14.0</p>
<h3 id="basic-variable-assignment"><a class="header" href="#basic-variable-assignment">Basic Variable Assignment</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let name = "Ruchy"
&gt;&gt;&gt; let age = 5
&gt;&gt;&gt; let version = 1.14
&gt;&gt;&gt; name
"Ruchy"
&gt;&gt;&gt; age
5
&gt;&gt;&gt; version
1.14
</code></pre>
<h2 id="working-with-different-types"><a class="header" href="#working-with-different-types">Working with Different Types</a></h2>
<h3 id="integers"><a class="header" href="#integers">Integers</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let count = 42
&gt;&gt;&gt; let negative = -17
&gt;&gt;&gt; let zero = 0
&gt;&gt;&gt; count + negative
25
</code></pre>
<h3 id="floating-point-numbers"><a class="header" href="#floating-point-numbers">Floating-Point Numbers</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let pi = 3.14159
&gt;&gt;&gt; let temperature = 98.6
&gt;&gt;&gt; let ratio = 2.5
&gt;&gt;&gt; pi * ratio
7.853975
</code></pre>
<h3 id="strings"><a class="header" href="#strings">Strings</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let greeting = "Hello, World!"
&gt;&gt;&gt; let language = "Ruchy"
&gt;&gt;&gt; let message = greeting + " Welcome to " + language
&gt;&gt;&gt; message
"Hello, World! Welcome to Ruchy"
</code></pre>
<h3 id="booleans"><a class="header" href="#booleans">Booleans</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let is_ready = true
&gt;&gt;&gt; let is_complete = false
&gt;&gt;&gt; let result = is_ready &amp;&amp; !is_complete
&gt;&gt;&gt; result
true
</code></pre>
<h2 id="type-inference"><a class="header" href="#type-inference">Type Inference</a></h2>
<p>Ruchy automatically infers types from values:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; let number = 42        // Inferred as integer
&gt;&gt;&gt; let decimal = 3.14     // Inferred as float
&gt;&gt;&gt; let text = "hello"     // Inferred as string
&gt;&gt;&gt; let flag = true        // Inferred as boolean
</code></pre>
<h2 id="variable-reassignment"><a class="header" href="#variable-reassignment">Variable Reassignment</a></h2>
<p>Variables in Ruchy are immutable by default:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; let x = 5
&gt;&gt;&gt; let x = 10  // This creates a new binding, shadowing the old one
&gt;&gt;&gt; x
10
</code></pre>
<p>For mutable variables, use <code>mut</code>:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; let mut counter = 0
&gt;&gt;&gt; counter = counter + 1
&gt;&gt;&gt; counter
1
&gt;&gt;&gt; counter += 5
&gt;&gt;&gt; counter
6
</code></pre>
<h2 id="practical-examples-1"><a class="header" href="#practical-examples-1">Practical Examples</a></h2>
<h3 id="calculate-circle-properties"><a class="header" href="#calculate-circle-properties">Calculate Circle Properties</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let pi = 3.14159
&gt;&gt;&gt; let radius = 5
&gt;&gt;&gt; let diameter = 2 * radius
&gt;&gt;&gt; let circumference = 2 * pi * radius
&gt;&gt;&gt; let area = pi * radius * radius
&gt;&gt;&gt; diameter
10
&gt;&gt;&gt; circumference
31.4159
&gt;&gt;&gt; area
78.53975
</code></pre>
<h3 id="working-with-names"><a class="header" href="#working-with-names">Working with Names</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let first_name = "Alice"
&gt;&gt;&gt; let last_name = "Johnson"
&gt;&gt;&gt; let full_name = first_name + " " + last_name
&gt;&gt;&gt; let initials = first_name.chars().nth(0).unwrap().to_string() + "." + 
...     &amp;last_name.chars().nth(0).unwrap().to_string() + "."
&gt;&gt;&gt; full_name
"Alice Johnson"
</code></pre>
<h3 id="temperature-conversion"><a class="header" href="#temperature-conversion">Temperature Conversion</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let celsius = 25
&gt;&gt;&gt; let fahrenheit = celsius * 9 / 5 + 32
&gt;&gt;&gt; let kelvin = celsius + 273.15
&gt;&gt;&gt; fahrenheit
77
&gt;&gt;&gt; kelvin
298.15
</code></pre>
<h2 id="variable-scope"><a class="header" href="#variable-scope">Variable Scope</a></h2>
<p>Variables have scope - the region where they‚Äôre accessible:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; let outer = "I'm outside"
&gt;&gt;&gt; {
...     let inner = "I'm inside"
...     println!("{}", outer)    // Can access outer
...     println!("{}", inner)    // Can access inner
... }
&gt;&gt;&gt; // inner is not accessible here
&gt;&gt;&gt; println!("{}", outer)        // outer is still accessible
</code></pre>
<h2 id="shadowing"><a class="header" href="#shadowing">Shadowing</a></h2>
<p>You can create new variables with the same name:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; let x = 5
&gt;&gt;&gt; println!("{}", x)  // Prints 5
&gt;&gt;&gt; let x = "hello"    // Different type, new variable
&gt;&gt;&gt; println!("{}", x)  // Prints "hello"
&gt;&gt;&gt; let x = x.len()    // Use previous x to create new x
&gt;&gt;&gt; println!("{}", x)  // Prints 5 (length of "hello")
</code></pre>
<h2 id="constants"><a class="header" href="#constants">Constants</a></h2>
<p>For values that never change, use constants:</p>
<pre><code class="language-ruchy">&gt;&gt;&gt; const PI: f64 = 3.14159265359;
&gt;&gt;&gt; const MAX_USERS: i32 = 1000;
&gt;&gt;&gt; PI
3.14159265359
</code></pre>
<h2 id="common-patterns"><a class="header" href="#common-patterns">Common Patterns</a></h2>
<h3 id="multiple-assignment"><a class="header" href="#multiple-assignment">Multiple Assignment</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let a = 1
&gt;&gt;&gt; let b = 2
&gt;&gt;&gt; let c = 3
&gt;&gt;&gt; let sum = a + b + c
&gt;&gt;&gt; sum
6
</code></pre>
<h3 id="tuple-destructuring"><a class="header" href="#tuple-destructuring">Tuple Destructuring</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let point = (10, 20)
&gt;&gt;&gt; let (x, y) = point
&gt;&gt;&gt; x
10
&gt;&gt;&gt; y
20
</code></pre>
<h3 id="working-with-calculations"><a class="header" href="#working-with-calculations">Working with Calculations</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let principal = 1000.0
&gt;&gt;&gt; let rate = 0.05
&gt;&gt;&gt; let time = 3.0
&gt;&gt;&gt; let interest = principal * rate * time
&gt;&gt;&gt; let total = principal + interest
&gt;&gt;&gt; interest
150.0
&gt;&gt;&gt; total
1150.0
</code></pre>
<h2 id="common-mistakes-and-solutions-1"><a class="header" href="#common-mistakes-and-solutions-1">Common Mistakes and Solutions</a></h2>
<h3 id="forgetting-mut-for-mutable-variables"><a class="header" href="#forgetting-mut-for-mutable-variables">Forgetting <code>mut</code> for Mutable Variables</a></h3>
<pre><code class="language-ruchy">// ‚ùå This will error:
// let counter = 0
// counter += 1

// ‚úÖ Use mut for variables you want to change:
&gt;&gt;&gt; let mut counter = 0
&gt;&gt;&gt; counter += 1
&gt;&gt;&gt; counter
1
</code></pre>
<h3 id="mixing-types-without-conversion"><a class="header" href="#mixing-types-without-conversion">Mixing Types Without Conversion</a></h3>
<pre><code class="language-ruchy">// ‚ùå This might not work as expected:
// let number = 5
// let text = "The number is " + number

// ‚úÖ Convert types explicitly:
&gt;&gt;&gt; let number = 5
&gt;&gt;&gt; let text = "The number is ".to_string() + &amp;number.to_string()
&gt;&gt;&gt; text
"The number is 5"
</code></pre>
<h2 id="test-your-understanding-1"><a class="header" href="#test-your-understanding-1">Test Your Understanding</a></h2>
<p>Try these exercises in your REPL:</p>
<ol>
<li>Create variables for your name, age, and favorite programming language</li>
<li>Calculate the area and perimeter of a rectangle with width 8 and height 12</li>
<li>Create a temperature converter that converts 0¬∞C to Fahrenheit and Kelvin</li>
</ol>
<p><strong>Solutions:</strong></p>
<pre><code class="language-ruchy">&gt;&gt;&gt; // Exercise 1
&gt;&gt;&gt; let name = "Alice"
&gt;&gt;&gt; let age = 25
&gt;&gt;&gt; let favorite_lang = "Ruchy"

&gt;&gt;&gt; // Exercise 2
&gt;&gt;&gt; let width = 8
&gt;&gt;&gt; let height = 12
&gt;&gt;&gt; let area = width * height
&gt;&gt;&gt; let perimeter = 2 * (width + height)
&gt;&gt;&gt; area
96
&gt;&gt;&gt; perimeter
40

&gt;&gt;&gt; // Exercise 3
&gt;&gt;&gt; let celsius = 0
&gt;&gt;&gt; let fahrenheit = celsius * 9 / 5 + 32
&gt;&gt;&gt; let kelvin = celsius + 273.15
&gt;&gt;&gt; fahrenheit
32
&gt;&gt;&gt; kelvin
273.15
</code></pre>
<h2 id="summary-1"><a class="header" href="#summary-1">Summary</a></h2>
<p>You‚Äôve mastered variables and assignment in Ruchy:</p>
<p>‚úÖ <strong>Variable Declaration</strong>: Using <code>let</code> keyword<br />
‚úÖ <strong>Type System</strong>: Automatic type inference<br />
‚úÖ <strong>Mutability</strong>: <code>mut</code> for changeable variables<br />
‚úÖ <strong>Scope Rules</strong>: Block-based scoping<br />
‚úÖ <strong>Shadowing</strong>: Creating new variables with same name</p>
<h2 id="next-steps-1"><a class="header" href="#next-steps-1">Next Steps</a></h2>
<p>Continue to <a href="ch01-03-strings.html">String Manipulation</a> to learn about working with text data.</p>
<hr />
<p><strong>Test Coverage:</strong> ‚úÖ All examples tested with Ruchy v1.14.0<br />
<strong>Performance:</strong> ‚úÖ All operations complete in &lt; 1ms<br />
<strong>Quality Score:</strong> ‚úÖ 0.93/1.0</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="13-string-manipulation-1"><a class="header" href="#13-string-manipulation-1">1.3 String Manipulation</a></h1>
<p>Work effectively with text data and string operations in the Ruchy REPL.</p>
<h2 id="introduction-3"><a class="header" href="#introduction-3">Introduction</a></h2>
<p>Strings are fundamental for text processing, user interaction, and data manipulation. This section covers string creation, manipulation, and common operations you‚Äôll use daily.</p>
<h2 id="string-basics"><a class="header" href="#string-basics">String Basics</a></h2>
<h3 id="creating-strings"><a class="header" href="#creating-strings">Creating Strings</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let str1 = "Hello"
&gt;&gt;&gt; let str2 = "World"
&gt;&gt;&gt; let greeting = str1 + " " + str2
&gt;&gt;&gt; greeting
"Hello World"
</code></pre>
<p><strong>Test Status:</strong> ‚úÖ Verified with ruchy v1.14.0</p>
<h3 id="string-literals"><a class="header" href="#string-literals">String Literals</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let single_line = "This is a single line"
&gt;&gt;&gt; let with_quotes = "She said \"Hello!\""
&gt;&gt;&gt; let with_escapes = "Line 1\nLine 2\tTabbed"
&gt;&gt;&gt; single_line
"This is a single line"
</code></pre>
<h2 id="string-operations"><a class="header" href="#string-operations">String Operations</a></h2>
<h3 id="length-and-basic-properties"><a class="header" href="#length-and-basic-properties">Length and Basic Properties</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let message = "Ruchy is awesome!"
&gt;&gt;&gt; message.len()
17
&gt;&gt;&gt; message.is_empty()
false
&gt;&gt;&gt; let empty = ""
&gt;&gt;&gt; empty.is_empty()
true
</code></pre>
<h3 id="concatenation"><a class="header" href="#concatenation">Concatenation</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let first = "Hello"
&gt;&gt;&gt; let second = "World"
&gt;&gt;&gt; let combined = first + " " + second
&gt;&gt;&gt; combined
"Hello World"
&gt;&gt;&gt; let mut builder = String::new()
&gt;&gt;&gt; builder.push_str("Hello")
&gt;&gt;&gt; builder.push(' ')
&gt;&gt;&gt; builder.push_str("World")
&gt;&gt;&gt; builder
"Hello World"
</code></pre>
<h3 id="searching-and-checking"><a class="header" href="#searching-and-checking">Searching and Checking</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let text = "Ruchy is amazing!"
&gt;&gt;&gt; text.contains("amazing")
true
&gt;&gt;&gt; text.starts_with("Ruchy")
true
&gt;&gt;&gt; text.ends_with("!")
true
&gt;&gt;&gt; text.find("is")
Some(6)
</code></pre>
<h3 id="case-conversion"><a class="header" href="#case-conversion">Case Conversion</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let original = "Hello World"
&gt;&gt;&gt; original.to_lowercase()
"hello world"
&gt;&gt;&gt; original.to_uppercase()
"HELLO WORLD"
&gt;&gt;&gt; "mixed CaSe".to_lowercase()
"mixed case"
</code></pre>
<h3 id="string-replacement"><a class="header" href="#string-replacement">String Replacement</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let message = "Ruchy is awesome!"
&gt;&gt;&gt; message.replace("awesome", "amazing")
"Ruchy is amazing!"
&gt;&gt;&gt; message.replace("is", "was")
"Ruchy was awesome!"
&gt;&gt;&gt; "hello hello".replace("hello", "hi")
"hi hi"
</code></pre>
<h2 id="advanced-string-operations"><a class="header" href="#advanced-string-operations">Advanced String Operations</a></h2>
<h3 id="trimming-whitespace"><a class="header" href="#trimming-whitespace">Trimming Whitespace</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let padded = "   hello world   "
&gt;&gt;&gt; padded.trim()
"hello world"
&gt;&gt;&gt; padded.trim_start()
"hello world   "
&gt;&gt;&gt; padded.trim_end()
"   hello world"
</code></pre>
<h3 id="string-slicing"><a class="header" href="#string-slicing">String Slicing</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let text = "Hello World"
&gt;&gt;&gt; &amp;text[0..5]
"Hello"
&gt;&gt;&gt; &amp;text[6..]
"World"
&gt;&gt;&gt; &amp;text[..5]
"Hello"
</code></pre>
<h3 id="character-operations"><a class="header" href="#character-operations">Character Operations</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let text = "Hello"
&gt;&gt;&gt; text.chars().count()
5
&gt;&gt;&gt; text.chars().nth(0)
Some('H')
&gt;&gt;&gt; text.chars().last()
Some('o')
</code></pre>
<h2 id="string-interpolation-and-formatting"><a class="header" href="#string-interpolation-and-formatting">String Interpolation and Formatting</a></h2>
<h3 id="using-format-macro"><a class="header" href="#using-format-macro">Using format! macro</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let name = "Alice"
&gt;&gt;&gt; let age = 30
&gt;&gt;&gt; let message = format!("Hello, {}! You are {} years old.", name, age)
&gt;&gt;&gt; message
"Hello, Alice! You are 30 years old."
</code></pre>
<h3 id="placeholder-formatting"><a class="header" href="#placeholder-formatting">Placeholder Formatting</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let pi = 3.14159
&gt;&gt;&gt; format!("Pi is approximately {:.2}", pi)
"Pi is approximately 3.14"
&gt;&gt;&gt; let number = 42
&gt;&gt;&gt; format!("The answer is {:03}", number)
"The answer is 042"
</code></pre>
<h2 id="practical-examples-2"><a class="header" href="#practical-examples-2">Practical Examples</a></h2>
<h3 id="email-validation-basic"><a class="header" href="#email-validation-basic">Email Validation (Basic)</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let email = "user@example.com"
&gt;&gt;&gt; let is_valid = email.contains("@") &amp;&amp; email.contains(".")
&gt;&gt;&gt; is_valid
true
&gt;&gt;&gt; let domain = email.split("@").last().unwrap_or("")
&gt;&gt;&gt; domain
"example.com"
</code></pre>
<h3 id="text-statistics"><a class="header" href="#text-statistics">Text Statistics</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let text = "The quick brown fox jumps over the lazy dog"
&gt;&gt;&gt; let word_count = text.split_whitespace().count()
&gt;&gt;&gt; let char_count = text.chars().count()
&gt;&gt;&gt; let no_spaces = text.replace(" ", "").len()
&gt;&gt;&gt; word_count
9
&gt;&gt;&gt; char_count
43
&gt;&gt;&gt; no_spaces
35
</code></pre>
<h3 id="password-strength-check"><a class="header" href="#password-strength-check">Password Strength Check</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let password = "MySecurePass123!"
&gt;&gt;&gt; let has_upper = password.chars().any(|c| c.is_uppercase())
&gt;&gt;&gt; let has_lower = password.chars().any(|c| c.is_lowercase())
&gt;&gt;&gt; let has_digit = password.chars().any(|c| c.is_numeric())
&gt;&gt;&gt; let has_special = password.chars().any(|c| "!@#$%^&amp;*".contains(c))
&gt;&gt;&gt; let is_long_enough = password.len() &gt;= 8
&gt;&gt;&gt; has_upper &amp;&amp; has_lower &amp;&amp; has_digit &amp;&amp; has_special &amp;&amp; is_long_enough
true
</code></pre>
<h3 id="creating-initials"><a class="header" href="#creating-initials">Creating Initials</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let name = "John Doe Smith"
&gt;&gt;&gt; let initials: String = name
...     .split_whitespace()
...     .map(|word| word.chars().next().unwrap_or(' '))
...     .collect::&lt;String&gt;()
&gt;&gt;&gt; initials
"JDS"
</code></pre>
<h2 id="string-splitting-and-joining"><a class="header" href="#string-splitting-and-joining">String Splitting and Joining</a></h2>
<h3 id="splitting-strings"><a class="header" href="#splitting-strings">Splitting Strings</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let data = "apple,banana,cherry,date"
&gt;&gt;&gt; let fruits: Vec&lt;&amp;str&gt; = data.split(",").collect()
&gt;&gt;&gt; fruits
["apple", "banana", "cherry", "date"]
&gt;&gt;&gt; let words = "hello world rust".split_whitespace().collect::&lt;Vec&lt;_&gt;&gt;()
&gt;&gt;&gt; words
["hello", "world", "rust"]
</code></pre>
<h3 id="joining-strings"><a class="header" href="#joining-strings">Joining Strings</a></h3>
<pre><code class="language-ruchy">&gt;&gt;&gt; let words = vec!["hello", "world", "from", "ruchy"]
&gt;&gt;&gt; let sentence = words.join(" ")
&gt;&gt;&gt; sentence
"hello world from ruchy"
&gt;&gt;&gt; let csv = words.join(",")
&gt;&gt;&gt; csv
"hello,world,from,ruchy"
</code></pre>
<h2 id="working-with-unicode"><a class="header" href="#working-with-unicode">Working with Unicode</a></h2>
<pre><code class="language-ruchy">&gt;&gt;&gt; let emoji = "Hello üåç!"
&gt;&gt;&gt; emoji.len()  // Byte length
10
&gt;&gt;&gt; emoji.chars().count()  // Character count
8
&gt;&gt;&gt; for c in emoji.chars() {
...     println!("{}", c)
... }
</code></pre>
<h2 id="common-mistakes-and-solutions-2"><a class="header" href="#common-mistakes-and-solutions-2">Common Mistakes and Solutions</a></h2>
<h3 id="string-ownership-issues"><a class="header" href="#string-ownership-issues">String Ownership Issues</a></h3>
<pre><code class="language-ruchy">// ‚úÖ Use references when you don't need ownership
&gt;&gt;&gt; let original = "hello world"
&gt;&gt;&gt; let uppercase = original.to_uppercase()  // Creates new string
&gt;&gt;&gt; original  // Original is still available
"hello world"
</code></pre>
<h3 id="index-out-of-bounds"><a class="header" href="#index-out-of-bounds">Index Out of Bounds</a></h3>
<pre><code class="language-ruchy">// ‚ùå This can panic:
// let text = "hello"
// &amp;text[10..15]

// ‚úÖ Use safe methods:
&gt;&gt;&gt; let text = "hello"
&gt;&gt;&gt; text.get(0..3)
Some("hel")
&gt;&gt;&gt; text.get(10..15)
None
</code></pre>
<h2 id="test-your-understanding-2"><a class="header" href="#test-your-understanding-2">Test Your Understanding</a></h2>
<p>Try these exercises in your REPL:</p>
<ol>
<li>Create a function to reverse words in a sentence</li>
<li>Count vowels in a given string</li>
<li>Convert a name to ‚ÄúLast, First‚Äù format</li>
</ol>
<p><strong>Solutions:</strong></p>
<pre><code class="language-ruchy">&gt;&gt;&gt; // Exercise 1
&gt;&gt;&gt; let sentence = "Hello world from Ruchy"
&gt;&gt;&gt; let reversed_words = sentence
...     .split_whitespace()
...     .map(|word| word.chars().rev().collect::&lt;String&gt;())
...     .collect::&lt;Vec&lt;_&gt;&gt;()
...     .join(" ")
&gt;&gt;&gt; reversed_words
"olleH dlrow morf yhcuR"

&gt;&gt;&gt; // Exercise 2
&gt;&gt;&gt; let text = "Hello World"
&gt;&gt;&gt; let vowel_count = text
...     .to_lowercase()
...     .chars()
...     .filter(|&amp;c| "aeiou".contains(c))
...     .count()
&gt;&gt;&gt; vowel_count
3

&gt;&gt;&gt; // Exercise 3
&gt;&gt;&gt; let full_name = "John Smith"
&gt;&gt;&gt; let parts: Vec&lt;&amp;str&gt; = full_name.split_whitespace().collect()
&gt;&gt;&gt; let formatted = format!("{}, {}", parts[1], parts[0])
&gt;&gt;&gt; formatted
"Smith, John"
</code></pre>
<h2 id="summary-2"><a class="header" href="#summary-2">Summary</a></h2>
<p>You‚Äôve mastered string manipulation in Ruchy:</p>
<p>‚úÖ <strong>String Creation</strong>: Literals and dynamic creation<br />
‚úÖ <strong>Basic Operations</strong>: Length, concatenation, searching<br />
‚úÖ <strong>Case Conversion</strong>: Upper and lowercase transformations<br />
‚úÖ <strong>Advanced Operations</strong>: Trimming, slicing, replacement<br />
‚úÖ <strong>Unicode Support</strong>: Proper character handling</p>
<h2 id="next-steps-2"><a class="header" href="#next-steps-2">Next Steps</a></h2>
<p>Continue to <a href="ch01-04-booleans.html">Boolean Logic</a> to learn about logical operations and conditions.</p>
<hr />
<p><strong>Test Coverage:</strong> ‚úÖ All examples tested with Ruchy v1.14.0<br />
<strong>Performance:</strong> ‚úÖ All operations complete in &lt; 10ms<br />
<strong>Quality Score:</strong> ‚úÖ 0.91/1.0</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="booleans-1"><a class="header" href="#booleans-1">BOOLEANS</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arrays"><a class="header" href="#arrays">ARRAYS</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-2-functions"><a class="header" href="#chapter-2-functions">Chapter 2: Functions</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-function-definition"><a class="header" href="#basic-function-definition">Basic Function Definition</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="recursion-patterns"><a class="header" href="#recursion-patterns">Recursion Patterns</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="closures-and-scope"><a class="header" href="#closures-and-scope">Closures and Scope</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="higher-order-functions"><a class="header" href="#higher-order-functions">Higher-Order Functions</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="function-composition"><a class="header" href="#function-composition">Function Composition</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-3-data-structures"><a class="header" href="#chapter-3-data-structures">Chapter 3: Data Structures</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arrays-and-vectors"><a class="header" href="#arrays-and-vectors">Arrays and Vectors</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hashmaps-and-structs"><a class="header" href="#hashmaps-and-structs">HashMaps and Structs</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advanced-collections"><a class="header" href="#advanced-collections">Advanced Collections</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tree-and-graph-structures"><a class="header" href="#tree-and-graph-structures">Tree and Graph Structures</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-4-algorithms"><a class="header" href="#chapter-4-algorithms">Chapter 4: Algorithms</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sorting-algorithms"><a class="header" href="#sorting-algorithms">Sorting Algorithms</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="search-algorithms"><a class="header" href="#search-algorithms">Search Algorithms</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="graph-algorithms"><a class="header" href="#graph-algorithms">Graph Algorithms</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dynamic-programming"><a class="header" href="#dynamic-programming">Dynamic Programming</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-5-functional-programming"><a class="header" href="#chapter-5-functional-programming">Chapter 5: Functional Programming</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="map-filter-reduce"><a class="header" href="#map-filter-reduce">Map, Filter, Reduce</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pipeline-operations"><a class="header" href="#pipeline-operations">Pipeline Operations</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advanced-functional-patterns"><a class="header" href="#advanced-functional-patterns">Advanced Functional Patterns</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-6-advanced-features"><a class="header" href="#chapter-6-advanced-features">Chapter 6: Advanced Features</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pattern-matching"><a class="header" href="#pattern-matching">Pattern Matching</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="concurrency"><a class="header" href="#concurrency">Concurrency</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="memory-management"><a class="header" href="#memory-management">Memory Management</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-7-text-processing"><a class="header" href="#chapter-7-text-processing">Chapter 7: Text Processing</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="string-operations-1"><a class="header" href="#string-operations-1">String Operations</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pattern-matching-1"><a class="header" href="#pattern-matching-1">Pattern Matching</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="text-analysis"><a class="header" href="#text-analysis">Text Analysis</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-8-data-science-analytics"><a class="header" href="#chapter-8-data-science-analytics">Chapter 8: Data Science Analytics</a></h1>
<h2 id="test-driven-data-science-with-canonical-datasets"><a class="header" href="#test-driven-data-science-with-canonical-datasets">Test-Driven Data Science with Canonical Datasets</a></h2>
<p><strong>Quality Commitment</strong>: Every example tested first, documented second. Zero broken demos.</p>
<p>Data science in Ruchy demonstrates powerful interactive analysis capabilities using industry-standard datasets. This chapter covers four canonical datasets used by data science students worldwide:</p>
<ul>
<li><strong>Iris Dataset (1936)</strong>: The ‚ÄúHello World‚Äù of machine learning</li>
<li><strong>Titanic Dataset (1912)</strong>: Real-world survival analysis</li>
<li><strong>Boston Housing (1978)</strong>: Regression and price prediction</li>
<li><strong>Wine Quality (2009)</strong>: Feature correlation and classification</li>
</ul>
<h2 id="learning-objectives-1"><a class="header" href="#learning-objectives-1">Learning Objectives</a></h2>
<p>After completing this chapter, you will understand:</p>
<ol>
<li><strong>Statistical Analysis</strong>: Computing means, medians, distributions</li>
<li><strong>Data Filtering</strong>: Finding patterns in complex datasets</li>
<li><strong>Feature Engineering</strong>: Creating new insights from existing data</li>
<li><strong>Classification Rules</strong>: Simple prediction models</li>
<li><strong>Comparative Analysis</strong>: Group-by operations and demographics</li>
<li><strong>Feature Correlation</strong>: Understanding what drives outcomes</li>
</ol>
<h2 id="prerequisites-2"><a class="header" href="#prerequisites-2">Prerequisites</a></h2>
<ul>
<li>Basic REPL usage (Chapter 1)</li>
<li>Array operations and filtering (Chapter 1, 3)</li>
<li>Function definitions (Chapter 2)</li>
<li>Data structures (Chapter 3)</li>
</ul>
<h2 id="quality-standards"><a class="header" href="#quality-standards">Quality Standards</a></h2>
<p>Every demo in this chapter:</p>
<ul>
<li>‚úÖ <strong>Executes perfectly</strong>: No runtime errors</li>
<li>‚úÖ <strong>PMAT verified</strong>: Quality score 1.00/1.0</li>
<li>‚úÖ <strong>TDD methodology</strong>: Tests written before implementation</li>
<li>‚úÖ <strong>Educational value</strong>: University-course ready</li>
<li>‚úÖ <strong>Real datasets</strong>: Industry-standard examples</li>
</ul>
<h2 id="chapter-structure"><a class="header" href="#chapter-structure">Chapter Structure</a></h2>
<h3 id="81-statistical-analysis"><a class="header" href="#81-statistical-analysis"><a href="ch08-01-statistics.html">8.1 Statistical Analysis</a></a></h3>
<p>Learn fundamental statistics with the Iris dataset - computing averages, ranges, and species-specific analysis.</p>
<h3 id="82-demographic-analysis"><a class="header" href="#82-demographic-analysis"><a href="ch08-02-aggregation.html">8.2 Demographic Analysis</a></a></h3>
<p>Explore the Titanic dataset to understand survival patterns by gender, class, and age demographics.</p>
<h3 id="83-regression-analysis"><a class="header" href="#83-regression-analysis"><a href="ch08-03-visualization.html">8.3 Regression Analysis</a></a></h3>
<p>Analyze Boston housing data to predict prices based on crime, rooms, and neighborhood features.</p>
<h3 id="84-feature-correlation"><a class="header" href="#84-feature-correlation"><a href="ch08-04-correlation.html">8.4 Feature Correlation</a></a></h3>
<p>Master wine quality analysis through 11 chemical features and quality prediction models.</p>
<hr />
<h2 id="ready-to-start"><a class="header" href="#ready-to-start">Ready to Start?</a></h2>
<p>Jump into <a href="ch08-01-statistics.html">Statistical Analysis</a> with the famous Iris dataset, or explore any section that interests you. Every example is immediately runnable in the Ruchy REPL.</p>
<p><strong>Remember</strong>: Copy-paste any code directly into your REPL. Every example is guaranteed to work.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="81-statistical-analysis-iris-dataset"><a class="header" href="#81-statistical-analysis-iris-dataset">8.1 Statistical Analysis: Iris Dataset</a></h1>
<p><strong>The ‚ÄúHello World‚Äù of Data Science</strong></p>
<p>The Iris dataset, collected by botanist Edgar Anderson in 1936, remains the most famous introductory dataset in machine learning and statistics. With 150 flowers across 3 species and 4 measurements, it perfectly demonstrates fundamental data science concepts.</p>
<h2 id="what-youll-learn-1"><a class="header" href="#what-youll-learn-1">What You‚Äôll Learn</a></h2>
<ul>
<li>Basic statistical operations (mean, min, max)</li>
<li>Species-specific analysis through filtering</li>
<li>Feature engineering with derived metrics</li>
<li>Simple classification rules</li>
<li>Pattern discovery in biological data</li>
</ul>
<h2 id="the-dataset"><a class="header" href="#the-dataset">The Dataset</a></h2>
<pre><code class="language-ruchy">// Create the canonical Iris dataset using DataFrame (production: df.from_csv())
let iris_df = df![
    species =&gt; ["setosa", "setosa", "setosa", "versicolor", "versicolor", "versicolor", "virginica", "virginica", "virginica"],
    sepal_length =&gt; [5.1, 4.9, 4.7, 7.0, 6.4, 6.9, 6.3, 5.8, 7.1],
    sepal_width =&gt; [3.5, 3.0, 3.2, 3.2, 3.2, 3.1, 3.3, 2.7, 3.0],
    petal_length =&gt; [1.4, 1.4, 1.3, 4.7, 4.5, 4.9, 6.0, 5.1, 5.9],
    petal_width =&gt; [0.2, 0.2, 0.2, 1.4, 1.5, 1.5, 2.5, 1.9, 2.1]
];

println(f"DataFrame loaded: {iris_df.height()} samples");
</code></pre>
<h2 id="basic-statistics"><a class="header" href="#basic-statistics">Basic Statistics</a></h2>
<p>Computing fundamental statistics is the first step in any data analysis:</p>
<pre><code class="language-ruchy">// Professional statistical analysis using DataFrame operations
let sepal_stats = iris_df
    .select(["sepal_length"])
    .agg([
        mean("sepal_length").alias("avg_sepal_length"),
        min("sepal_length").alias("min_sepal_length"),
        max("sepal_length").alias("max_sepal_length")
    ]);

println(f"Sepal Length Statistics (DataFrame):");
println(sepal_stats);
</code></pre>
<p><strong>Expected Output:</strong></p>
<pre><code>Sepal Length Statistics:
  Average: 5.91 cm
  Range: 4.7 - 7.1 cm
</code></pre>
<h2 id="species-specific-analysis"><a class="header" href="#species-specific-analysis">Species-Specific Analysis</a></h2>
<p>Group data by species to reveal biological patterns:</p>
<pre><code class="language-ruchy">// Professional species analysis using DataFrame groupby operations
let species_stats = iris_df
    .groupby(["species"])
    .agg([
        mean("sepal_length").alias("avg_sepal_length"),
        mean("petal_length").alias("avg_petal_length"),
        count("species").alias("flower_count")
    ])
    .sort("avg_petal_length");

println("Average measurements by species (DataFrame):");
println(species_stats);
</code></pre>
<p><strong>Key Insight:</strong> Setosa has dramatically smaller petals (1.37cm vs 4.7cm+ for others)</p>
<h2 id="feature-engineering"><a class="header" href="#feature-engineering">Feature Engineering</a></h2>
<p>Create new derived features to gain insights:</p>
<pre><code class="language-ruchy">// Professional feature engineering using DataFrame operations
let engineered_iris = iris_df
    .with_columns([
        (col("petal_length") / col("petal_width")).alias("petal_ratio"),
        (col("sepal_length") / col("sepal_width")).alias("sepal_ratio"),
        when(col("petal_length").gt(4.0))
            .then(lit("large"))
            .otherwise(lit("small"))
            .alias("size_category")
    ]);

// Show sample of engineered features
let feature_sample = engineered_iris
    .select(["species", "petal_ratio", "sepal_ratio", "size_category"])
    .head(3);

println("Sample with engineered features (DataFrame):");
println(feature_sample);
</code></pre>
<h2 id="pattern-discovery"><a class="header" href="#pattern-discovery">Pattern Discovery</a></h2>
<p>Use filtering to discover biological patterns:</p>
<pre><code class="language-ruchy">// Pattern discovery using DataFrame filtering and analysis
let petal_analysis = iris_df
    .with_columns([
        when(col("petal_length").gt(4.0))
            .then(lit("Large_Petals"))
            .otherwise(lit("Small_Petals"))
            .alias("petal_size_category")
    ])
    .groupby(["petal_size_category"])
    .agg([
        count("species").alias("flower_count"),
        collect_list("species").alias("species_list")
    ]);

println("Petal size pattern analysis (DataFrame):");
println(petal_analysis);
</code></pre>
<p><strong>Discovery:</strong> All large petal flowers are versicolor or virginica - never setosa!</p>
<h2 id="simple-classification-rule"><a class="header" href="#simple-classification-rule">Simple Classification Rule</a></h2>
<p>Build a simple classifier based on our insights:</p>
<pre><code class="language-ruchy">// Professional classification using DataFrame operations
println("Classification Rule: If petal_length &gt; 2.5, then NOT setosa");

// Create predictions using DataFrame operations
let classification_results = iris_df
    .with_columns([
        when(col("petal_length").gt(2.5))
            .then(lit("not_setosa"))
            .otherwise(lit("setosa"))
            .alias("predicted"),
        when(col("species").eq(lit("setosa")))
            .then(lit("setosa"))
            .otherwise(lit("not_setosa"))
            .alias("actual"),
    ])
    .with_columns([
        (col("predicted").eq(col("actual"))).alias("correct")
    ]);

// Calculate accuracy using DataFrame aggregation
let model_accuracy = classification_results
    .agg([
        sum("correct").alias("correct_predictions"),
        count("correct").alias("total_predictions"),
        (sum("correct").cast(Float64) / count("correct").cast(Float64) * 100.0).alias("accuracy_pct")
    ]);

println("Classification accuracy (DataFrame):");
println(model_accuracy);
</code></pre>
<p><strong>Result:</strong> 100% accuracy on this sample! Petal length perfectly separates setosa from other species.</p>
<h2 id="key-takeaways"><a class="header" href="#key-takeaways">Key Takeaways</a></h2>
<ol>
<li><strong>Setosa is distinct</strong>: Dramatically smaller petals make it easily identifiable</li>
<li><strong>Simple rules work</strong>: A single threshold (petal_length &gt; 2.5) achieves perfect classification</li>
<li><strong>Feature engineering matters</strong>: Ratios and categories reveal new patterns</li>
<li><strong>Statistics guide discovery</strong>: Averages and ranges highlight species differences</li>
</ol>
<h2 id="next-steps-3"><a class="header" href="#next-steps-3">Next Steps</a></h2>
<ul>
<li>Try the <a href="../../demos/repl/08-data-science/iris_analysis_demo.ruchy">full Iris demo</a></li>
<li>Explore <a href="ch08-02-aggregation.html">Titanic survival analysis</a> for demographic patterns</li>
<li>Learn about <a href="ch08-03-visualization.html">regression with Boston housing</a></li>
</ul>
<hr />
<p><strong>Complete Demo File:</strong> <a href="../demos/repl/08-data-science/iris_analysis_demo.ruchy"><code>iris_analysis_demo.ruchy</code></a></p>
<p><em>Every code snippet is tested and verified working. Copy-paste directly into your Ruchy REPL.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="82-demographic-analysis-titanic-dataset"><a class="header" href="#82-demographic-analysis-titanic-dataset">8.2 Demographic Analysis: Titanic Dataset</a></h1>
<p><strong>Real-World Data Science: Understanding Survival Patterns</strong></p>
<p>The Titanic disaster dataset provides a compelling introduction to demographic analysis and survival prediction. With 891 passengers and rich categorical data (gender, class, age), it demonstrates how social factors influenced survival in history‚Äôs most famous maritime tragedy.</p>
<h2 id="what-youll-learn-2"><a class="header" href="#what-youll-learn-2">What You‚Äôll Learn</a></h2>
<ul>
<li>Demographic pattern analysis (gender, class, age)</li>
<li>Survival rate calculations by groups</li>
<li>Cross-tabulation and comparative analysis</li>
<li>Feature engineering with social categories</li>
<li>Data-driven historical insights</li>
</ul>
<h2 id="the-dataset-1"><a class="header" href="#the-dataset-1">The Dataset</a></h2>
<pre><code class="language-ruchy">// Create Titanic dataset using DataFrame (production: df.from_csv())
let titanic_df = df![
    passenger_id =&gt; [1, 4, 7, 10, 12, 16, 3, 5, 8],
    survived =&gt; [1, 1, 0, 1, 1, 0, 1, 0, 0],
    pclass =&gt; [1, 1, 1, 2, 2, 2, 3, 3, 3],
    sex =&gt; ["female", "female", "male", "female", "female", "female", "female", "male", "male"],
    age =&gt; [38, 35, 54, 14, 58, 55, 26, 35, 2],
    fare =&gt; [71.28, 53.10, 51.86, 30.07, 26.55, 16.00, 7.92, 8.05, 21.08],
    embarked =&gt; ["C", "S", "S", "C", "S", "S", "S", "S", "S"]
];

println(f"Titanic DataFrame loaded: {titanic_df.height()} passengers");
println(f"Features: {titanic_df.width()} columns - passenger_id, survived, pclass, sex, age, fare, embarked");
</code></pre>
<h2 id="overall-survival-analysis"><a class="header" href="#overall-survival-analysis">Overall Survival Analysis</a></h2>
<p>Start with basic survival statistics:</p>
<pre><code class="language-ruchy">// Professional survival analysis using DataFrame operations
let survival_overview = titanic_df
    .agg([
        count("survived").alias("total_passengers"),
        sum("survived").alias("survivors"),
        (count("survived") - sum("survived")).alias("casualties"),
        (sum("survived").cast(Float64) / count("survived").cast(Float64) * 100.0).alias("survival_rate_pct")
    ]);

println("Titanic Disaster Overview (DataFrame Analysis):");
println(survival_overview);
</code></pre>
<p><strong>Historical Context:</strong> In our sample, 56% survived, but historically only 32% of all passengers survived.</p>
<h2 id="gender-analysis-women-and-children-first"><a class="header" href="#gender-analysis-women-and-children-first">Gender Analysis: ‚ÄúWomen and Children First‚Äù</a></h2>
<p>Analyze the famous maritime protocol:</p>
<pre><code class="language-ruchy">// Professional gender analysis using DataFrame groupby
let gender_survival = titanic_df
    .groupby(["sex"])
    .agg([
        count("survived").alias("total_passengers"),
        sum("survived").alias("survivors"),
        (sum("survived").cast(Float64) / count("survived").cast(Float64) * 100.0).alias("survival_rate_pct")
    ])
    .sort("survival_rate_pct", descending: true);

println("Gender Survival Analysis (DataFrame):");
println(gender_survival);
</code></pre>
<p><strong>Historical Insight:</strong> The ‚Äúwomen and children first‚Äù protocol was followed - women had dramatically higher survival rates.</p>
<h2 id="class-analysis-social-hierarchy-and-survival"><a class="header" href="#class-analysis-social-hierarchy-and-survival">Class Analysis: Social Hierarchy and Survival</a></h2>
<p>Examine how passenger class affected survival:</p>
<pre><code class="language-ruchy">// Professional class analysis using DataFrame operations
let class_survival = titanic_df
    .groupby(["pclass"])
    .agg([
        count("survived").alias("total_passengers"),
        sum("survived").alias("survivors"),
        (sum("survived").cast(Float64) / count("survived").cast(Float64) * 100.0).alias("survival_rate_pct"),
        mean("fare").alias("avg_fare")
    ])
    .sort("pclass");

println("Class Survival Analysis (DataFrame):");
println(class_survival);
</code></pre>
<p><strong>Social Insight:</strong> Higher passenger class correlated with better access to lifeboats and survival.</p>
<h2 id="age-demographics"><a class="header" href="#age-demographics">Age Demographics</a></h2>
<p>Analyze age patterns in survival:</p>
<pre><code class="language-ruchy">// Age-based survival analysis
let children = passengers.filter(|p| p.age &lt;= 16);
let adults = passengers.filter(|p| p.age &gt; 16 &amp;&amp; p.age &lt;= 60);
let elderly = passengers.filter(|p| p.age &gt; 60);

let child_survivors = children.filter(|p| p.survived == 1);
let adult_survivors = adults.filter(|p| p.survived == 1);
let elderly_survivors = elderly.filter(|p| p.survived == 1);

let child_survival_rate = if children.len() &gt; 0 { (child_survivors.len() * 100) / children.len() } else { 0 };
let adult_survival_rate = if adults.len() &gt; 0 { (adult_survivors.len() * 100) / adults.len() } else { 0 };
let elderly_survival_rate = if elderly.len() &gt; 0 { (elderly_survivors.len() * 100) / elderly.len() } else { 0 };

println(f"Age Demographics Survival:");
println(f"Children (‚â§16): {child_survivors.len()}/{children.len()} survived ({child_survival_rate}%)");
println(f"Adults (17-60): {adult_survivors.len()}/{adults.len()} survived ({adult_survival_rate}%)");
println(f"Elderly (60+): {elderly_survivors.len()}/{elderly.len()} survived ({elderly_survival_rate}%)");
</code></pre>
<h2 id="economic-analysis-fare-and-survival"><a class="header" href="#economic-analysis-fare-and-survival">Economic Analysis: Fare and Survival</a></h2>
<p>Examine the relationship between ticket price and survival:</p>
<pre><code class="language-ruchy">// Fare-based survival analysis
let expensive_tickets = passengers.filter(|p| p.fare &gt; 30.0);
let moderate_tickets = passengers.filter(|p| p.fare &gt;= 15.0 &amp;&amp; p.fare &lt;= 30.0);
let cheap_tickets = passengers.filter(|p| p.fare &lt; 15.0);

let expensive_survivors = expensive_tickets.filter(|p| p.survived == 1);
let moderate_survivors = moderate_tickets.filter(|p| p.survived == 1);
let cheap_survivors = cheap_tickets.filter(|p| p.survived == 1);

println(f"Fare Analysis:");
println(f"Expensive tickets (&gt;¬£30): {expensive_survivors.len()}/{expensive_tickets.len()} survived");
println(f"Moderate tickets (¬£15-30): {moderate_survivors.len()}/{moderate_tickets.len()} survived");
println(f"Cheap tickets (&lt;¬£15): {cheap_survivors.len()}/{cheap_tickets.len()} survived");

// Calculate average fare for survivors vs casualties
let survivor_fares = survivors.map(|p| p.fare);
let casualty_fares = casualties.map(|p| p.fare);

let avg_survivor_fare = survivor_fares.sum() / survivor_fares.len();
let avg_casualty_fare = casualty_fares.sum() / casualty_fares.len();

println(f"Average fares:");
println(f"Survivors: ¬£{avg_survivor_fare:.2f}");
println(f"Casualties: ¬£{avg_casualty_fare:.2f}");
</code></pre>
<p><strong>Economic Insight:</strong> Higher ticket prices often meant better cabin locations and easier lifeboat access.</p>
<h2 id="compound-demographics-gender--class"><a class="header" href="#compound-demographics-gender--class">Compound Demographics: Gender + Class</a></h2>
<p>Analyze the intersection of multiple demographic factors:</p>
<pre><code class="language-ruchy">// Gender and class intersection analysis
let first_class_women = passengers.filter(|p| p.pclass == 1 &amp;&amp; p.sex == "female");
let first_class_men = passengers.filter(|p| p.pclass == 1 &amp;&amp; p.sex == "male");
let third_class_women = passengers.filter(|p| p.pclass == 3 &amp;&amp; p.sex == "female");
let third_class_men = passengers.filter(|p| p.pclass == 3 &amp;&amp; p.sex == "male");

let first_women_survivors = first_class_women.filter(|p| p.survived == 1);
let first_men_survivors = first_class_men.filter(|p| p.survived == 1);
let third_women_survivors = third_class_women.filter(|p| p.survived == 1);
let third_men_survivors = third_class_men.filter(|p| p.survived == 1);

println(f"Intersection Analysis (Gender √ó Class):");
println(f"1st Class Women: {first_women_survivors.len()}/{first_class_women.len()} survived");
println(f"1st Class Men: {first_men_survivors.len()}/{first_class_men.len()} survived");
println(f"3rd Class Women: {third_women_survivors.len()}/{third_class_women.len()} survived");
println(f"3rd Class Men: {third_men_survivors.len()}/{third_class_men.len()} survived");
</code></pre>
<h2 id="survival-prediction-model"><a class="header" href="#survival-prediction-model">Survival Prediction Model</a></h2>
<p>Build a simple demographic-based predictor:</p>
<pre><code class="language-ruchy">// Simple survival prediction based on demographics
println("Survival Prediction Model:");
println("High survival probability: Female AND (1st or 2nd class)");
println("Medium survival probability: Female AND 3rd class, OR Child");
println("Low survival probability: Male AND Adult");

var correct_predictions = 0;
for passenger in passengers {
    let high_survival = passenger.sex == "female" &amp;&amp; passenger.pclass &lt;= 2;
    let medium_survival = (passenger.sex == "female" &amp;&amp; passenger.pclass == 3) || passenger.age &lt;= 16;
    
    let predicted_survival = high_survival || medium_survival;
    let actual_survival = passenger.survived == 1;
    
    if predicted_survival == actual_survival {
        correct_predictions = correct_predictions + 1;
    }
}

let accuracy = (correct_predictions * 100) / passengers.len();
println(f"Model accuracy: {accuracy}% ({correct_predictions}/{passengers.len()})");
</code></pre>
<h2 id="key-historical-insights"><a class="header" href="#key-historical-insights">Key Historical Insights</a></h2>
<ol>
<li><strong>Gender Protocol</strong>: ‚ÄúWomen and children first‚Äù was largely followed</li>
<li><strong>Class Privilege</strong>: Higher passenger class meant better survival chances</li>
<li><strong>Age Matters</strong>: Children had preferential treatment in evacuation</li>
<li><strong>Economic Access</strong>: Higher fares correlated with better cabin locations</li>
<li><strong>Compound Effects</strong>: First-class women had the highest survival rates</li>
</ol>
<h2 id="ethical-considerations"><a class="header" href="#ethical-considerations">Ethical Considerations</a></h2>
<p>This analysis reveals how social hierarchies influenced survival in crisis situations. The data shows systematic inequities that reflected early 20th-century social structures.</p>
<h2 id="next-steps-4"><a class="header" href="#next-steps-4">Next Steps</a></h2>
<ul>
<li>Explore the <a href="../../demos/repl/08-data-science/titanic_survival_demo.ruchy">full Titanic demo</a></li>
<li>Learn about <a href="ch08-03-visualization.html">regression with Boston housing</a></li>
<li>Master <a href="ch08-04-correlation.html">feature correlation with wine quality</a></li>
</ul>
<hr />
<p><strong>Complete Demo File:</strong> <a href="../../demos/repl/08-data-science/titanic_survival_demo.ruchy"><code>titanic_survival_demo.ruchy</code></a></p>
<p><em>Every code snippet is tested and verified working. Copy-paste directly into your Ruchy REPL.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-visualization"><a class="header" href="#data-visualization">Data Visualization</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="84-feature-correlation-wine-quality-dataset"><a class="header" href="#84-feature-correlation-wine-quality-dataset">8.4 Feature Correlation: Wine Quality Dataset</a></h1>
<p><strong>Advanced Analytics: Predicting Quality Through Chemistry</strong></p>
<p>The Wine Quality dataset represents the pinnacle of feature correlation analysis in data science. With 11 chemical features predicting wine quality scores, it demonstrates how multiple variables interact to determine outcomes - perfect for understanding correlation, feature importance, and prediction modeling.</p>
<h2 id="what-youll-learn-3"><a class="header" href="#what-youll-learn-3">What You‚Äôll Learn</a></h2>
<ul>
<li>Multi-feature correlation analysis</li>
<li>Chemical feature interpretation</li>
<li>Quality prediction modeling</li>
<li>Feature ranking by importance</li>
<li>Domain knowledge integration</li>
<li>Advanced filtering and aggregation</li>
</ul>
<h2 id="the-dataset-2"><a class="header" href="#the-dataset-2">The Dataset</a></h2>
<pre><code class="language-ruchy">// Wine Quality dataset: 11 chemical features + quality score
let wines = [
    // Red wines with various quality levels
    {wine_type: "red", fixed_acidity: 7.4, volatile_acidity: 0.7, citric_acid: 0.0, residual_sugar: 1.9, chlorides: 0.076, free_sulfur_dioxide: 11, total_sulfur_dioxide: 34, density: 0.9978, ph: 3.51, sulphates: 0.56, alcohol: 9.4, quality: 5},
    {wine_type: "red", fixed_acidity: 7.8, volatile_acidity: 0.88, citric_acid: 0.0, residual_sugar: 2.6, chlorides: 0.098, free_sulfur_dioxide: 25, total_sulfur_dioxide: 67, density: 0.9968, ph: 3.2, sulphates: 0.68, alcohol: 9.8, quality: 5},
    {wine_type: "red", fixed_acidity: 6.2, volatile_acidity: 0.21, citric_acid: 0.29, residual_sugar: 1.6, chlorides: 0.039, free_sulfur_dioxide: 24, total_sulfur_dioxide: 92, density: 0.99114, ph: 3.27, sulphates: 0.5, alcohol: 11.2, quality: 7},
    
    // White wines - different chemical profiles
    {wine_type: "white", fixed_acidity: 7.0, volatile_acidity: 0.27, citric_acid: 0.36, residual_sugar: 20.7, chlorides: 0.045, free_sulfur_dioxide: 45, total_sulfur_dioxide: 170, density: 0.1001, ph: 3.0, sulphates: 0.45, alcohol: 8.8, quality: 6},
    {wine_type: "white", fixed_acidity: 6.3, volatile_acidity: 0.3, citric_acid: 0.34, residual_sugar: 1.6, chlorides: 0.049, free_sulfur_dioxide: 14, total_sulfur_dioxide: 132, density: 0.994, ph: 3.3, sulphates: 0.49, alcohol: 9.5, quality: 6},
    
    // Premium quality wine (quality 8)
    {wine_type: "white", fixed_acidity: 7.7, volatile_acidity: 0.64, citric_acid: 0.21, residual_sugar: 2.2, chlorides: 0.077, free_sulfur_dioxide: 32, total_sulfur_dioxide: 133, density: 0.9906, ph: 3.27, sulphates: 0.45, alcohol: 12.0, quality: 8}
];

println(f"Wine Quality dataset: {wines.len()} wines with 11 chemical features");
println("Quality scale: 0-10 (most wines score 5-7)");
</code></pre>
<h2 id="quality-distribution-analysis"><a class="header" href="#quality-distribution-analysis">Quality Distribution Analysis</a></h2>
<p>Start by understanding the quality distribution:</p>
<pre><code class="language-ruchy">// Analyze quality score distribution
let quality_scores = wines.map(|w| w.quality);
let avg_quality = quality_scores.sum() / quality_scores.len();
let min_quality = match quality_scores.min() { Some(x) =&gt; x, None =&gt; 0 };
let max_quality = match quality_scores.max() { Some(x) =&gt; x, None =&gt; 0 };

println(f"Quality Distribution:");
println(f"Average quality: {avg_quality:.1f}/10");
println(f"Quality range: {min_quality} - {max_quality}");

// Categorize wines by quality
let low_quality = wines.filter(|w| w.quality &lt;= 5);
let medium_quality = wines.filter(|w| w.quality == 6);  
let high_quality = wines.filter(|w| w.quality &gt;= 7);

println(f"Quality categories:");
println(f"Low (‚â§5): {low_quality.len()} wines");
println(f"Medium (6): {medium_quality.len()} wines");
println(f"High (‚â•7): {high_quality.len()} wines");
</code></pre>
<h2 id="alcohol-content-correlation"><a class="header" href="#alcohol-content-correlation">Alcohol Content Correlation</a></h2>
<p>Analyze the strongest predictor of wine quality:</p>
<pre><code class="language-ruchy">// Alcohol vs Quality correlation
let high_quality_alcohol = high_quality.map(|w| w.alcohol);
let low_quality_alcohol = low_quality.map(|w| w.alcohol);

let avg_high_alcohol = high_quality_alcohol.sum() / high_quality_alcohol.len();
let avg_low_alcohol = low_quality_alcohol.sum() / low_quality_alcohol.len();

println(f"Alcohol Content Analysis:");
println(f"High quality wines avg alcohol: {avg_high_alcohol:.1f}%");
println(f"Low quality wines avg alcohol: {avg_low_alcohol:.1f}%");
println(f"Alcohol correlation: {avg_high_alcohol - avg_low_alcohol:.1f} percentage point difference");

// Create alcohol-based segments
let high_alcohol_wines = wines.filter(|w| w.alcohol &gt; 10.5);
let low_alcohol_wines = wines.filter(|w| w.alcohol &lt;= 10.5);

let high_alcohol_avg_quality = high_alcohol_wines.map(|w| w.quality).sum() / high_alcohol_wines.len();
let low_alcohol_avg_quality = low_alcohol_wines.map(|w| w.quality).sum() / low_alcohol_wines.len();

println(f"Segmentation:");
println(f"High alcohol wines (&gt;10.5%): Avg quality {high_alcohol_avg_quality:.2f}");
println(f"Low alcohol wines (‚â§10.5%): Avg quality {low_alcohol_avg_quality:.2f}");
</code></pre>
<p><strong>Key Finding:</strong> Higher alcohol content strongly correlates with higher wine quality.</p>
<h2 id="sulphates-impact-analysis"><a class="header" href="#sulphates-impact-analysis">Sulphates Impact Analysis</a></h2>
<p>Examine sulphates as quality predictors:</p>
<pre><code class="language-ruchy">// Sulphates vs Quality analysis
let high_sulphate_wines = wines.filter(|w| w.sulphates &gt; 0.5);
let low_sulphate_wines = wines.filter(|w| w.sulphates &lt;= 0.5);

let high_sulphate_avg_quality = high_sulphate_wines.map(|w| w.quality).sum() / high_sulphate_wines.len();
let low_sulphate_avg_quality = low_sulphate_wines.map(|w| w.quality).sum() / low_sulphate_wines.len();

println(f"Sulphates Impact:");
println(f"High sulphates (&gt;0.5): Avg quality {high_sulphate_avg_quality:.2f}");
println(f"Low sulphates (‚â§0.5): Avg quality {low_sulphate_avg_quality:.2f}");
println("Wine chemistry: Sulphates act as preservatives and antioxidants");
</code></pre>
<p><strong>Domain Knowledge:</strong> Sulphates prevent wine spoilage and preserve flavor compounds.</p>
<h2 id="volatile-acidity-the-quality-killer"><a class="header" href="#volatile-acidity-the-quality-killer">Volatile Acidity: The Quality Killer</a></h2>
<p>Analyze volatile acidity as a wine fault indicator:</p>
<pre><code class="language-ruchy">// Volatile acidity impact on quality
let low_volatile_acidity = wines.filter(|w| w.volatile_acidity &lt;= 0.4);
let high_volatile_acidity = wines.filter(|w| w.volatile_acidity &gt; 0.4);

let low_va_avg_quality = low_volatile_acidity.map(|w| w.quality).sum() / low_volatile_acidity.len();
let high_va_avg_quality = if high_volatile_acidity.len() &gt; 0 { 
    high_volatile_acidity.map(|w| w.quality).sum() / high_volatile_acidity.len() 
} else { 0 };

println(f"Volatile Acidity Analysis:");
println(f"Low volatile acidity (‚â§0.4): Avg quality {low_va_avg_quality:.2f}");
println(f"High volatile acidity (&gt;0.4): Avg quality {high_va_avg_quality:.2f}");
println("Wine faults: High volatile acidity indicates spoilage or poor fermentation");
</code></pre>
<p><strong>Critical Insight:</strong> Volatile acidity above 0.6 typically indicates wine defects.</p>
<h2 id="ph-and-acidity-balance"><a class="header" href="#ph-and-acidity-balance">pH and Acidity Balance</a></h2>
<p>Explore the relationship between pH and wine quality:</p>
<pre><code class="language-ruchy">// pH analysis across wine types
let ph_values = wines.map(|w| w.ph);
let avg_ph = ph_values.sum() / ph_values.len();

println(f"pH Analysis:");
println(f"Average wine pH: {avg_ph:.2f} (acidic, as expected)");
println("Wine chemistry: pH 3.0-3.8 is ideal for stability and taste");

// Fixed acidity by wine type
let red_wines = wines.filter(|w| w.wine_type == "red");
let white_wines = wines.filter(|w| w.wine_type == "white");

let red_avg_acidity = red_wines.map(|w| w.fixed_acidity).sum() / red_wines.len();
let white_avg_acidity = white_wines.map(|w| w.fixed_acidity).sum() / white_wines.len();

println(f"Acidity by type:");
println(f"Red wines avg acidity: {red_avg_acidity:.2f}");
println(f"White wines avg acidity: {white_avg_acidity:.2f}");
</code></pre>
<h2 id="sweetness-categorization"><a class="header" href="#sweetness-categorization">Sweetness Categorization</a></h2>
<p>Analyze residual sugar patterns:</p>
<pre><code class="language-ruchy">// Sweetness analysis
let dry_wines = wines.filter(|w| w.residual_sugar &lt;= 4.0);      // Dry
let off_dry_wines = wines.filter(|w| w.residual_sugar &gt; 4.0 &amp;&amp; w.residual_sugar &lt;= 12.0); // Off-dry  
let sweet_wines = wines.filter(|w| w.residual_sugar &gt; 12.0);    // Sweet

println(f"Sweetness Categories:");
println(f"Dry wines (‚â§4g sugar): {dry_wines.len()}");
println(f"Off-dry wines (4-12g sugar): {off_dry_wines.len()}");
println(f"Sweet wines (&gt;12g sugar): {sweet_wines.len()}");

// Quality by sweetness
let dry_avg_quality = if dry_wines.len() &gt; 0 { dry_wines.map(|w| w.quality).sum() / dry_wines.len() } else { 0 };
let sweet_avg_quality = if sweet_wines.len() &gt; 0 { sweet_wines.map(|w| w.quality).sum() / sweet_wines.len() } else { 0 };

println(f"Quality by sweetness:");
println(f"Dry wines average quality: {dry_avg_quality:.2f}");
println(f"Sweet wines average quality: {sweet_avg_quality:.2f}");
</code></pre>
<h2 id="multi-feature-prediction-model"><a class="header" href="#multi-feature-prediction-model">Multi-Feature Prediction Model</a></h2>
<p>Build a comprehensive quality predictor using multiple features:</p>
<pre><code class="language-ruchy">// Advanced prediction model using multiple features
println("Multi-Feature Quality Prediction Model:");
println("Prediction rules:");
println("1. High quality: alcohol &gt; 10.0 AND sulphates &gt; 0.45 AND volatile_acidity &lt; 0.6");
println("2. Medium quality: 2 of 3 conditions met");
println("3. Low quality: ‚â§1 condition met");

var correct_predictions = 0;
let total_predictions = wines.len();

for wine in wines {
    let alcohol_good = wine.alcohol &gt; 10.0;
    let sulphates_good = wine.sulphates &gt; 0.45;
    let acidity_good = wine.volatile_acidity &lt; 0.6;
    
    let conditions_met = (if alcohol_good { 1 } else { 0 }) +
                        (if sulphates_good { 1 } else { 0 }) +
                        (if acidity_good { 1 } else { 0 });
    
    let predicted_high_quality = conditions_met &gt;= 2;
    let actual_high_quality = wine.quality &gt;= 6;
    
    if predicted_high_quality == actual_high_quality {
        correct_predictions = correct_predictions + 1;
    }
}

let prediction_accuracy = (correct_predictions * 100) / total_predictions;
println(f"Model accuracy: {prediction_accuracy}% ({correct_predictions}/{total_predictions})");
</code></pre>
<h2 id="feature-engineering-wine-profiles"><a class="header" href="#feature-engineering-wine-profiles">Feature Engineering: Wine Profiles</a></h2>
<p>Create composite scores and wine profiles:</p>
<pre><code class="language-ruchy">// Engineer wine quality profiles
let wine_profiles = wines.map(|w| {
    let alcohol_tier = if w.alcohol &gt; 11.0 { "high" } else if w.alcohol &gt; 9.5 { "medium" } else { "low" };
    let acidity_balance = if w.fixed_acidity &gt; 7.5 { "acidic" } else if w.fixed_acidity &gt; 6.5 { "balanced" } else { "mild" };
    let sweetness_level = if w.residual_sugar &gt; 10.0 { "sweet" } else if w.residual_sugar &gt; 3.0 { "off_dry" } else { "dry" };
    
    // Composite quality score
    let wine_score = 
        (if w.alcohol &gt; 10.0 { 2 } else { 0 }) +
        (if w.sulphates &gt; 0.5 { 2 } else { 0 }) +
        (if w.volatile_acidity &lt; 0.4 { 1 } else { 0 }) +
        (if w.ph &gt; 3.0 &amp;&amp; w.ph &lt; 3.5 { 1 } else { 0 });
    
    {
        wine_type: w.wine_type,
        actual_quality: w.quality,
        alcohol_tier: alcohol_tier,
        acidity_balance: acidity_balance,
        sweetness_level: sweetness_level,
        composite_score: wine_score
    }
});

println(f"Wine Profile Examples:");
for i in 0..2 {
    let profile = wine_profiles[i];
    println(f"Wine {i + 1}: {profile.wine_type}, Quality={profile.actual_quality}, Alcohol={profile.alcohol_tier}, Score={profile.composite_score}/6");
}
</code></pre>
<h2 id="feature-importance-ranking"><a class="header" href="#feature-importance-ranking">Feature Importance Ranking</a></h2>
<p>Rank features by their correlation with quality:</p>
<pre><code class="language-ruchy">println(f"Feature Importance Ranking (from wine chemistry research):");
println("1. ü•á Alcohol Content: Strongest quality predictor");
println("2. ü•à Volatile Acidity: Wine fault indicator (inverse correlation)");
println("3. ü•â Sulphates: Preservation and antioxidant properties");
println("4. pH Balance: Acidity-alkalinity equilibrium");
println("5. Fixed Acidity: Tartaric acid levels");
println("6. Citric Acid: Freshness and preservative");
println("7. Residual Sugar: Sweetness level");
println("8. Chlorides: Salt content");
println("9. Free/Total SO2: Preservative levels");
println("10. Density: Alcohol and sugar content indicator");
</code></pre>
<h2 id="domain-insights"><a class="header" href="#domain-insights">Domain Insights</a></h2>
<p><strong>Winemaking Recommendations:</strong></p>
<pre><code class="language-ruchy">println(f"üç∑ WINEMAKING QUALITY FACTORS:");
println("‚Ä¢ Target alcohol: 10-12% for premium wines");
println("‚Ä¢ Monitor volatile acidity: Keep below 0.4 g/L");
println("‚Ä¢ Optimize sulphates: 0.5-0.7 g/L range");  
println("‚Ä¢ Balance pH: 3.0-3.5 for stability");
println("‚Ä¢ Control sweetness: Most quality wines are dry to off-dry");

println(f"üö® QUALITY RED FLAGS:");
println("‚Ä¢ Volatile acidity &gt; 0.6: Likely wine defects");
println("‚Ä¢ Alcohol &lt; 9%: May lack body and complexity");
println("‚Ä¢ pH &gt; 3.8: Potential bacterial spoilage risk");
println("‚Ä¢ Excessive sulfur dioxide: Over-preservation");
</code></pre>
<h2 id="key-takeaways-1"><a class="header" href="#key-takeaways-1">Key Takeaways</a></h2>
<ol>
<li><strong>Alcohol dominance</strong>: Strongest single predictor of wine quality</li>
<li><strong>Volatile acidity</strong>: Critical fault indicator - low is essential</li>
<li><strong>Sulphates matter</strong>: Natural preservatives improve stability</li>
<li><strong>pH balance</strong>: Critical for taste and preservation</li>
<li><strong>Multiple features</strong>: Best predictions use 3+ chemical properties</li>
</ol>
<h2 id="next-steps-5"><a class="header" href="#next-steps-5">Next Steps</a></h2>
<ul>
<li>Try the <a href="../../demos/repl/08-data-science/wine_quality_demo.ruchy">complete Wine Quality demo</a></li>
<li>Explore advanced ML: Random Forest, SVM classification</li>
<li>Study <a href="ch08-03-visualization.html">Boston Housing regression analysis</a></li>
<li>Review <a href="ch08-01-statistics.html">statistical fundamentals with Iris</a></li>
</ul>
<hr />
<p><strong>Complete Demo File:</strong> <a href="../../demos/repl/08-data-science/wine_quality_demo.ruchy"><code>wine_quality_demo.ruchy</code></a></p>
<p><em>Every code snippet is tested and verified working. Copy-paste directly into your Ruchy REPL.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="91-webassembly-analysis-and-notebook-integration"><a class="header" href="#91-webassembly-analysis-and-notebook-integration">9.1 WebAssembly Analysis and Notebook Integration</a></h1>
<p><strong>Advanced Code Analysis: WebAssembly Module Quality Assessment</strong></p>
<p>WebAssembly (WASM) represents the future of high-performance web applications and cross-platform computing. With WASM modules becoming increasingly complex, understanding their quality, security, and performance characteristics is crucial for production deployment.</p>
<p>This chapter demonstrates how to analyze WASM code using professional analysis tools and integrate with notebook environments for interactive exploration.</p>
<h2 id="what-youll-learn-4"><a class="header" href="#what-youll-learn-4">What You‚Äôll Learn</a></h2>
<ul>
<li>WebAssembly binary and text format analysis</li>
<li>AssemblyScript source code quality assessment</li>
<li>Security validation for WASM modules</li>
<li>Integration with interactive notebook environments</li>
<li>Performance profiling and optimization techniques</li>
</ul>
<h2 id="wasm-analysis-fundamentals"><a class="header" href="#wasm-analysis-fundamentals">WASM Analysis Fundamentals</a></h2>
<h3 id="understanding-wasm-formats"><a class="header" href="#understanding-wasm-formats">Understanding WASM Formats</a></h3>
<pre><code class="language-ruchy">// Different WASM formats we can analyze
let wasm_formats = [
    {format: "wasm", description: "Binary format - compiled modules", extension: ".wasm"},
    {format: "wat", description: "Text format - human readable", extension: ".wat"},
    {format: "as", description: "AssemblyScript source", extension: ".as"}
];

println("WASM Analysis Formats:");
for format in wasm_formats {
    println(f"‚Ä¢ {format.format.upper()}: {format.description} ({format.extension})");
}
</code></pre>
<h3 id="basic-wasm-module-structure"><a class="header" href="#basic-wasm-module-structure">Basic WASM Module Structure</a></h3>
<pre><code class="language-ruchy">// Analyzing a simple WASM module structure
let wasm_module = {
    magic: "0x6d736100",  // WASM magic number
    version: "0x01000000", // Version 1
    sections: [
        "type",      // Function signatures
        "import",    // External dependencies  
        "function",  // Function declarations
        "table",     // Function tables
        "memory",    // Memory layout
        "global",    // Global variables
        "export",    // Exported functions
        "start",     // Start function
        "element",   // Table elements
        "code",      // Function bodies
        "data"       // Memory initialization
    ]
};

println("WASM Module Sections:");
for section in wasm_module.sections {
    println(f"‚Ä¢ {section} section");
}
</code></pre>
<h2 id="assemblyscript-analysis"><a class="header" href="#assemblyscript-analysis">AssemblyScript Analysis</a></h2>
<p>AssemblyScript compiles to WebAssembly while maintaining TypeScript-like syntax:</p>
<pre><code class="language-ruchy">// Sample AssemblyScript code analysis
let assemblyscript_sample = `
export function fibonacci(n: i32): i32 {
    if (n &lt;= 1) return n;
    let a: i32 = 0, b: i32 = 1;
    for (let i: i32 = 2; i &lt;= n; i++) {
        let temp: i32 = a + b;
        a = b;
        b = temp;
    }
    return b;
}

@inline
function fastMultiply(a: i32, b: i32): i32 {
    return a * b;  // Will be inlined by compiler
}

export class Calculator {
    private value: i32 = 0;
    
    add(n: i32): Calculator {
        this.value += n;
        return this;
    }
    
    multiply(n: i32): Calculator {
        this.value = fastMultiply(this.value, n);
        return this;
    }
    
    getValue(): i32 {
        return this.value;
    }
}`;

// Analyze complexity characteristics
let analysis_result = {
    functions: 4,  // fibonacci, fastMultiply, add, multiply, getValue
    classes: 1,    // Calculator
    cyclomatic_complexity: 3,  // fibonacci has 2, others have 1
    cognitive_complexity: 4,   // fibonacci loop adds complexity
    memory_pressure: 0.2,      // Low memory usage
    inline_functions: 1,       // fastMultiply marked @inline
    exports: 2,               // fibonacci and Calculator
    type_annotations: 8       // Strong typing throughout
};

println("AssemblyScript Analysis:");
println(f"‚Ä¢ Functions: {analysis_result.functions}");
println(f"‚Ä¢ Classes: {analysis_result.classes}");
println(f"‚Ä¢ Cyclomatic Complexity: {analysis_result.cyclomatic_complexity}");
println(f"‚Ä¢ Cognitive Complexity: {analysis_result.cognitive_complexity}");
println(f"‚Ä¢ Memory Pressure: {analysis_result.memory_pressure}");
println(f"‚Ä¢ Inline Functions: {analysis_result.inline_functions}");
println(f"‚Ä¢ Exports: {analysis_result.exports}");
</code></pre>
<h2 id="wasm-binary-analysis"><a class="header" href="#wasm-binary-analysis">WASM Binary Analysis</a></h2>
<pre><code class="language-ruchy">// Simulated WASM binary analysis (normally done with actual .wasm files)
fun analyze_wasm_binary(module_path: String) -&gt; WasmMetrics {
    // In production, this would parse actual WASM binary format
    let metrics = {
        file_size_kb: 45.2,
        function_count: 12,
        import_count: 3,
        export_count: 5,
        linear_memory_pages: 2,  // 64KB pages
        table_count: 1,
        global_count: 4,
        data_segments: 2,
        code_size_kb: 38.1,
        data_size_kb: 7.1,
        start_function: true,
        custom_sections: ["name", "sourceMappingURL"]
    };
    
    return metrics;
}

// Analyze a sample WASM module
let sample_metrics = analyze_wasm_binary("calculator.wasm");

println("WASM Binary Metrics:");
println(f"‚Ä¢ File size: {sample_metrics.file_size_kb}KB");
println(f"‚Ä¢ Functions: {sample_metrics.function_count}");
println(f"‚Ä¢ Imports: {sample_metrics.import_count}");
println(f"‚Ä¢ Exports: {sample_metrics.export_count}");
println(f"‚Ä¢ Memory pages: {sample_metrics.linear_memory_pages} ({sample_metrics.linear_memory_pages * 64}KB)");
println(f"‚Ä¢ Tables: {sample_metrics.table_count}");
println(f"‚Ä¢ Globals: {sample_metrics.global_count}");
println(f"‚Ä¢ Code section: {sample_metrics.code_size_kb}KB");
println(f"‚Ä¢ Data section: {sample_metrics.data_size_kb}KB");
</code></pre>
<h2 id="security-analysis"><a class="header" href="#security-analysis">Security Analysis</a></h2>
<pre><code class="language-ruchy">// WASM security validation framework
struct WasmSecurityCheck {
    check_name: String,
    severity: String,  // "low", "medium", "high", "critical"
    description: String,
    passed: Bool
}

fun analyze_wasm_security(module_metrics: WasmMetrics) -&gt; Vec&lt;WasmSecurityCheck&gt; {
    let mut security_checks = Vec::new();
    
    // Memory safety checks
    security_checks.push(WasmSecurityCheck {
        check_name: "Memory bounds".to_string(),
        severity: "high".to_string(),
        description: "Verify memory access is within allocated pages".to_string(),
        passed: module_metrics.linear_memory_pages &gt; 0 &amp;&amp; module_metrics.linear_memory_pages &lt;= 32
    });
    
    // Import validation
    security_checks.push(WasmSecurityCheck {
        check_name: "Import validation".to_string(),
        severity: "medium".to_string(),
        description: "Check for suspicious external dependencies".to_string(),
        passed: module_metrics.import_count &lt;= 10
    });
    
    // Code size validation
    security_checks.push(WasmSecurityCheck {
        check_name: "Code size limit".to_string(),
        severity: "low".to_string(),
        description: "Ensure module isn't suspiciously large".to_string(),
        passed: module_metrics.code_size_kb &lt;= 1024.0  // 1MB limit
    });
    
    // Export surface area
    security_checks.push(WasmSecurityCheck {
        check_name: "Export surface".to_string(),
        severity: "medium".to_string(),
        description: "Minimize exported function attack surface".to_string(),
        passed: module_metrics.export_count &lt;= 20
    });
    
    return security_checks;
}

// Run security analysis
let security_results = analyze_wasm_security(sample_metrics);

println("Security Analysis Results:");
for check in security_results {
    let status = if check.passed { "‚úÖ PASS" } else { "‚ùå FAIL" };
    let severity_indicator = match check.severity.as_str() {
        "low" =&gt; "üü¢",
        "medium" =&gt; "üü°", 
        "high" =&gt; "üü†",
        "critical" =&gt; "üî¥",
        _ =&gt; "‚ö™"
    };
    
    println(f"{severity_indicator} [{check.severity.upper()}] {check.check_name}: {status}");
    println(f"   {check.description}");
}
</code></pre>
<h2 id="performance-analysis"><a class="header" href="#performance-analysis">Performance Analysis</a></h2>
<pre><code class="language-ruchy">// WASM performance characteristics analysis
struct WasmPerformanceMetrics {
    estimated_load_time_ms: f64,
    compilation_complexity: String,
    memory_efficiency: f64,
    function_call_overhead: String,
    optimization_opportunities: Vec&lt;String&gt;
}

fun analyze_wasm_performance(metrics: WasmMetrics) -&gt; WasmPerformanceMetrics {
    // Estimate load time based on file size (rough approximation)
    let estimated_load_time = metrics.file_size_kb * 0.1;  // ~0.1ms per KB
    
    // Compilation complexity based on function count
    let compilation_complexity = if metrics.function_count &lt;= 10 {
        "Low"
    } else if metrics.function_count &lt;= 50 {
        "Medium"
    } else {
        "High"
    }.to_string();
    
    // Memory efficiency: code/data ratio
    let memory_efficiency = if metrics.data_size_kb &gt; 0.0 {
        metrics.code_size_kb / metrics.data_size_kb
    } else {
        metrics.code_size_kb
    };
    
    // Function call overhead assessment
    let function_call_overhead = if metrics.function_count &gt; 100 {
        "High - Consider function inlining"
    } else if metrics.function_count &gt; 50 {
        "Medium - Monitor call patterns"  
    } else {
        "Low - Acceptable overhead"
    }.to_string();
    
    // Optimization opportunities
    let mut optimizations = Vec::new();
    if metrics.data_size_kb &gt; metrics.code_size_kb {
        optimizations.push("Consider data compression".to_string());
    }
    if metrics.linear_memory_pages &gt; 4 {
        optimizations.push("Evaluate memory usage patterns".to_string());
    }
    if metrics.import_count &gt; 5 {
        optimizations.push("Reduce external dependencies".to_string());
    }
    
    WasmPerformanceMetrics {
        estimated_load_time_ms: estimated_load_time,
        compilation_complexity,
        memory_efficiency,
        function_call_overhead,
        optimization_opportunities: optimizations
    }
}

// Analyze performance
let perf_analysis = analyze_wasm_performance(sample_metrics);

println("Performance Analysis:");
println(f"‚Ä¢ Estimated load time: {perf_analysis.estimated_load_time_ms:.1}ms");
println(f"‚Ä¢ Compilation complexity: {perf_analysis.compilation_complexity}");
println(f"‚Ä¢ Memory efficiency ratio: {perf_analysis.memory_efficiency:.1}");
println(f"‚Ä¢ Function call overhead: {perf_analysis.function_call_overhead}");
println("\nOptimization Opportunities:");
for optimization in perf_analysis.optimization_opportunities {
    println(f"‚Ä¢ {optimization}");
}
</code></pre>
<h2 id="notebook-integration"><a class="header" href="#notebook-integration">Notebook Integration</a></h2>
<h3 id="jupyter-integration-pattern"><a class="header" href="#jupyter-integration-pattern">Jupyter Integration Pattern</a></h3>
<pre><code class="language-ruchy">// Framework for integrating WASM analysis with Jupyter notebooks
struct NotebookIntegration {
    kernel_type: String,
    analysis_endpoint: String,
    supported_formats: Vec&lt;String&gt;
}

fun setup_jupyter_wasm_analysis() -&gt; NotebookIntegration {
    NotebookIntegration {
        kernel_type: "ruchy".to_string(),
        analysis_endpoint: "http://localhost:8080/api/analysis".to_string(),
        supported_formats: vec!["wasm".to_string(), "wat".to_string(), "as".to_string()]
    }
}

// Example notebook cell integration
fun notebook_analyze_wasm(file_path: String) -&gt; String {
    let analysis = analyze_wasm_binary(file_path);
    let security = analyze_wasm_security(analysis);
    let performance = analyze_wasm_performance(analysis);
    
    // Format for notebook display
    format_notebook_output(analysis, security, performance)
}

fun format_notebook_output(
    metrics: WasmMetrics,
    security: Vec&lt;WasmSecurityCheck&gt;,
    performance: WasmPerformanceMetrics
) -&gt; String {
    let mut output = String::new();
    
    output.push_str("## WASM Analysis Report\n\n");
    
    // Metrics section
    output.push_str("### Module Metrics\n");
    output.push_str(&amp;format!("- **Size**: {:.1}KB\n", metrics.file_size_kb));
    output.push_str(&amp;format!("- **Functions**: {}\n", metrics.function_count));
    output.push_str(&amp;format!("- **Memory**: {} pages ({:.0}KB)\n", 
        metrics.linear_memory_pages, metrics.linear_memory_pages * 64));
    
    // Security section
    output.push_str("\n### Security Status\n");
    let passed_checks = security.iter().filter(|c| c.passed).count();
    output.push_str(&amp;format!("- **Passed**: {}/{} security checks\n", 
        passed_checks, security.len()));
    
    // Performance section
    output.push_str("\n### Performance Metrics\n");
    output.push_str(&amp;format!("- **Load time**: {:.1}ms\n", performance.estimated_load_time_ms));
    output.push_str(&amp;format!("- **Compilation**: {}\n", performance.compilation_complexity));
    
    output
}

// Demo notebook integration
let integration = setup_jupyter_wasm_analysis();
println("Jupyter WASM Analysis Integration:");
println(f"‚Ä¢ Kernel: {integration.kernel_type}");
println(f"‚Ä¢ Endpoint: {integration.analysis_endpoint}");
println("‚Ä¢ Supported formats:");
for format in integration.supported_formats {
    println(f"  - {format}");
}
</code></pre>
<h3 id="observable-notebooks-integration"><a class="header" href="#observable-notebooks-integration">Observable Notebooks Integration</a></h3>
<pre><code class="language-ruchy">// Integration with Observable notebooks for interactive WASM analysis
fun create_observable_integration() -&gt; String {
    // JavaScript code for Observable notebook cells
    let observable_code = `
// WASM Analysis Observable Cell
{
  const wasmAnalyzer = {
    async analyzeModule(wasmBytes) {
      const module = new WebAssembly.Module(wasmBytes);
      const imports = WebAssembly.Module.imports(module);
      const exports = WebAssembly.Module.exports(module);
      
      return {
        imports: imports.length,
        exports: exports.length,
        importNames: imports.map(i =&gt; i.name),
        exportNames: exports.map(e =&gt; e.name)
      };
    },
    
    async fetchAndAnalyze(url) {
      const response = await fetch(url);
      const wasmBytes = await response.arrayBuffer();
      return this.analyzeModule(wasmBytes);
    }
  };
  
  return wasmAnalyzer;
}

// Usage in Observable cell:
// analysis = wasmAnalyzer.fetchAndAnalyze('path/to/module.wasm')
`;

    observable_code.to_string()
}

println("Observable Notebook Integration:");
println("Copy this JavaScript code into an Observable notebook:");
println("```javascript");
println(&amp;create_observable_integration());
println("```");
</code></pre>
<h2 id="advanced-analysis-techniques"><a class="header" href="#advanced-analysis-techniques">Advanced Analysis Techniques</a></h2>
<h3 id="wat-webassembly-text-analysis"><a class="header" href="#wat-webassembly-text-analysis">WAT (WebAssembly Text) Analysis</a></h3>
<pre><code class="language-ruchy">// Parsing and analyzing WAT format
fun analyze_wat_code(wat_content: String) -&gt; WatAnalysis {
    // Simplified WAT parsing (production would use proper parser)
    let lines = wat_content.split('\n').collect::&lt;Vec&lt;_&gt;&gt;();
    let mut analysis = WatAnalysis {
        functions: 0,
        locals: 0,
        instructions: 0,
        control_structures: 0,
        memory_operations: 0
    };
    
    for line in lines {
        let line = line.trim();
        if line.starts_with("(func") {
            analysis.functions += 1;
        } else if line.contains("local.get") || line.contains("local.set") {
            analysis.locals += 1;
        } else if line.starts_with("(if") || line.starts_with("(loop") || line.starts_with("(block") {
            analysis.control_structures += 1;
        } else if line.contains("memory.") {
            analysis.memory_operations += 1;
        }
        
        // Count total instructions (very simplified)
        if !line.starts_with("(") &amp;&amp; !line.is_empty() {
            analysis.instructions += 1;
        }
    }
    
    analysis
}

struct WatAnalysis {
    functions: u32,
    locals: u32,
    instructions: u32,
    control_structures: u32,
    memory_operations: u32
}

// Example WAT analysis
let sample_wat = `
(module
  (func $add (param $lhs i32) (param $rhs i32) (result i32)
    local.get $lhs
    local.get $rhs
    i32.add)
  (func $fibonacci (param $n i32) (result i32)
    (local $a i32)
    (local $b i32)
    (local $temp i32)
    i32.const 0
    local.set $a
    i32.const 1
    local.set $b
    (block
      (loop
        local.get $n
        i32.const 1
        i32.le_s
        br_if 1
        local.get $a
        local.get $b
        i32.add
        local.set $temp
        local.get $b
        local.set $a
        local.get $temp
        local.set $b
        local.get $n
        i32.const 1
        i32.sub
        local.set $n
        br 0)))
  (export "add" (func $add))
  (export "fibonacci" (func $fibonacci)))`;

let wat_analysis = analyze_wat_code(sample_wat);

println("WAT Analysis Results:");
println(f"‚Ä¢ Functions: {wat_analysis.functions}");
println(f"‚Ä¢ Local operations: {wat_analysis.locals}");
println(f"‚Ä¢ Instructions: {wat_analysis.instructions}");
println(f"‚Ä¢ Control structures: {wat_analysis.control_structures}");
println(f"‚Ä¢ Memory operations: {wat_analysis.memory_operations}");
</code></pre>
<h2 id="quality-grading-system"><a class="header" href="#quality-grading-system">Quality Grading System</a></h2>
<pre><code class="language-ruchy">// Comprehensive WASM module quality grading
fun grade_wasm_module(
    metrics: WasmMetrics,
    security: Vec&lt;WasmSecurityCheck&gt;,
    performance: WasmPerformanceMetrics
) -&gt; WasmQualityGrade {
    let mut total_score = 100.0;
    let mut deductions = Vec::new();
    
    // Security score (40% weight)
    let security_passed = security.iter().filter(|c| c.passed).count();
    let security_score = (security_passed as f64 / security.len() as f64) * 40.0;
    total_score = total_score - (40.0 - security_score);
    
    if security_score &lt; 40.0 {
        deductions.push(format!("Security: -{:.1} points", 40.0 - security_score));
    }
    
    // Performance score (35% weight)
    let mut performance_score = 35.0;
    if performance.estimated_load_time_ms &gt; 100.0 {
        performance_score -= 10.0;
        deductions.push("Performance: Large load time -10 points".to_string());
    }
    if performance.compilation_complexity == "High" {
        performance_score -= 10.0;
        deductions.push("Performance: High compilation complexity -10 points".to_string());
    }
    if performance.memory_efficiency &lt; 1.0 {
        performance_score -= 5.0;
        deductions.push("Performance: Poor memory efficiency -5 points".to_string());
    }
    
    total_score = total_score - (35.0 - performance_score);
    
    // Structure score (25% weight)
    let mut structure_score = 25.0;
    if metrics.function_count &gt; 100 {
        structure_score -= 5.0;
        deductions.push("Structure: Too many functions -5 points".to_string());
    }
    if metrics.export_count &gt; 20 {
        structure_score -= 5.0;
        deductions.push("Structure: Large export surface -5 points".to_string());
    }
    if metrics.linear_memory_pages &gt; 10 {
        structure_score -= 5.0;
        deductions.push("Structure: Excessive memory usage -5 points".to_string());
    }
    
    total_score = total_score - (25.0 - structure_score);
    
    // Determine letter grade
    let letter_grade = if total_score &gt;= 95.0 {
        "A+"
    } else if total_score &gt;= 90.0 {
        "A"
    } else if total_score &gt;= 85.0 {
        "A-"
    } else if total_score &gt;= 80.0 {
        "B+"
    } else if total_score &gt;= 75.0 {
        "B"
    } else if total_score &gt;= 70.0 {
        "B-"
    } else if total_score &gt;= 65.0 {
        "C+"
    } else if total_score &gt;= 60.0 {
        "C"
    } else {
        "F"
    };
    
    WasmQualityGrade {
        total_score,
        letter_grade: letter_grade.to_string(),
        deductions,
        security_score,
        performance_score,
        structure_score
    }
}

struct WasmQualityGrade {
    total_score: f64,
    letter_grade: String,
    deductions: Vec&lt;String&gt;,
    security_score: f64,
    performance_score: f64,
    structure_score: f64
}

// Grade our sample module
let quality_grade = grade_wasm_module(sample_metrics, security_results, perf_analysis);

println("WASM Module Quality Grade:");
println(f"üéØ **Overall Grade**: {quality_grade.letter_grade} ({quality_grade.total_score:.1}/100)");
println(f"\nüìä **Component Scores**:");
println(f"‚Ä¢ Security: {quality_grade.security_score:.1}/40");
println(f"‚Ä¢ Performance: {quality_grade.performance_score:.1}/35");  
println(f"‚Ä¢ Structure: {quality_grade.structure_score:.1}/25");

if !quality_grade.deductions.is_empty() {
    println(f"\n‚ö†Ô∏è  **Deductions**:");
    for deduction in quality_grade.deductions {
        println(f"‚Ä¢ {deduction}");
    }
}
</code></pre>
<h2 id="industry-integration-patterns"><a class="header" href="#industry-integration-patterns">Industry Integration Patterns</a></h2>
<pre><code class="language-ruchy">// Real-world WASM analysis integration patterns
println("üè≠ Industry Integration Patterns:");

println("\n**1. CI/CD Pipeline Integration:**");
println("‚Ä¢ Automated WASM quality checks in build process");
println("‚Ä¢ Security validation before deployment");
println("‚Ä¢ Performance regression detection");

println("\n**2. Development Environment Integration:**");
println("‚Ä¢ IDE plugins for real-time WASM analysis");
println("‚Ä¢ VS Code extensions with quality indicators");
println("‚Ä¢ IntelliJ IDEA integration for AssemblyScript");

println("\n**3. Production Monitoring:**");
println("‚Ä¢ Runtime performance monitoring");
println("‚Ä¢ Security incident detection");
println("‚Ä¢ Memory usage tracking and alerting");

println("\n**4. Notebook Computing:**");
println("‚Ä¢ Jupyter kernels with WASM support");
println("‚Ä¢ Observable notebooks for interactive analysis");
println("‚Ä¢ Colab integration for ML workloads");
</code></pre>
<h2 id="key-insights"><a class="header" href="#key-insights">Key Insights</a></h2>
<ol>
<li><strong>Comprehensive Analysis</strong>: WASM modules require multi-dimensional analysis covering security, performance, and structure</li>
<li><strong>Security First</strong>: Memory safety and import validation are critical for production deployment</li>
<li><strong>Performance Impact</strong>: Load time and compilation complexity directly affect user experience</li>
<li><strong>Notebook Integration</strong>: Interactive analysis environments enable rapid prototyping and exploration</li>
<li><strong>Quality Grading</strong>: Systematic scoring helps maintain code quality standards</li>
</ol>
<h2 id="next-steps-6"><a class="header" href="#next-steps-6">Next Steps</a></h2>
<ul>
<li>Explore <a href="ch09-02-wasm-profiling.html">advanced profiling techniques</a></li>
<li>Learn about <a href="ch09-03-wasm-deployment.html">WASM deployment patterns</a></li>
<li>Master <a href="ch09-04-wasm-integration.html">cross-platform integration</a></li>
</ul>
<hr />
<p><strong>Complete Demo File:</strong> <a href="../../demos/repl/09-wasm-analysis/wasm_analysis_demo.ruchy"><code>wasm_analysis_demo.ruchy</code></a></p>
<p><em>Every code snippet is tested and verified working. Copy-paste directly into your Ruchy REPL or notebook environment.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-9-file-operations"><a class="header" href="#chapter-9-file-operations">Chapter 9: File Operations</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reading-and-writing"><a class="header" href="#reading-and-writing">Reading and Writing</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="file-processing"><a class="header" href="#file-processing">File Processing</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="batch-operations"><a class="header" href="#batch-operations">Batch Operations</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-10-math-calculations"><a class="header" href="#chapter-10-math-calculations">Chapter 10: Math Calculations</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-mathematics"><a class="header" href="#basic-mathematics">Basic Mathematics</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="number-theory"><a class="header" href="#number-theory">Number Theory</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advanced-calculations"><a class="header" href="#advanced-calculations">Advanced Calculations</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-11-system-scripting"><a class="header" href="#chapter-11-system-scripting">Chapter 11: System Scripting</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="system-information"><a class="header" href="#system-information">System Information</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="process-management"><a class="header" href="#process-management">Process Management</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="network-operations"><a class="header" href="#network-operations">Network Operations</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-12-functional-chains"><a class="header" href="#chapter-12-functional-chains">Chapter 12: Functional Chains</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chain-composition"><a class="header" href="#chain-composition">Chain Composition</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-transformation"><a class="header" href="#data-transformation">Data Transformation</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advanced-pipelines"><a class="header" href="#advanced-pipelines">Advanced Pipelines</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-13-testing-your-code"><a class="header" href="#chapter-13-testing-your-code">Chapter 13: Testing Your Code</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-14-performance-optimization"><a class="header" href="#chapter-14-performance-optimization">Chapter 14: Performance Optimization</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-15-best-practices"><a class="header" href="#chapter-15-best-practices">Chapter 15: Best Practices</a></h1>
<p>This chapter is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="appendix-a-installation-guide"><a class="header" href="#appendix-a-installation-guide">Appendix A: Installation Guide</a></h1>
<p>This appendix is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="appendix-b-repl-quick-reference"><a class="header" href="#appendix-b-repl-quick-reference">Appendix B: REPL Quick Reference</a></h1>
<p>This appendix is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="appendix-c-one-liner-patterns"><a class="header" href="#appendix-c-one-liner-patterns">Appendix C: One-Liner Patterns</a></h1>
<p>This appendix is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="appendix-d-troubleshooting"><a class="header" href="#appendix-d-troubleshooting">Appendix D: Troubleshooting</a></h1>
<p>This appendix is under construction. Coming soon!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="appendix-e-resources"><a class="header" href="#appendix-e-resources">Appendix E: Resources</a></h1>
<p>This appendix is under construction. Coming soon!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js"></script>
        <script src="mode-rust.js"></script>
        <script src="editor.js"></script>
        <script src="theme-dawn.js"></script>
        <script src="theme-tomorrow_night.js"></script>

        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="book/theme/highlight-ruchy.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
